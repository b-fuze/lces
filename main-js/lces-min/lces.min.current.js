lces.rc[10]=function(){lces.css={};lces.css.colorize=function(e,t,i,n){var s=false;if(typeof e!=="string"){s=e;e=e.lcesColorizeSrc}var r=function(e){return(parseInt(e,16)<17?"00".substr(e.length):"")+e+(parseInt(e,16)>16?"00".substr(e.length):"")};r.full=function(e,t,i){return"#"+r(e.toString(16))+r(t.toString(16))+r(i.toString(16))};var o=r.full(t,i,n);e=e.replace(/rgb(a?)\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*((?:,\s*\d{1}(?:\.\d+)?\s*)?)\)/gi,"rgb$1("+t+", "+i+", "+n+"$2)");e=e.replace(/:\s*#(?:[\d\w]{3}|[\d\w]{6})\s*;/gi,": "+o+";");if(s){var a=/lc-rgbhsv\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+\s*\)/;var l=/lc-rgbahsv\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*(\d+(?:\.\d+)?)\s*,\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+\s*\)/;var c=/lc-rgba?hsv\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(?:,\s*\d+(?:\.\d+)?\s*)?,\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*(-?\d+)\s*\)/;var d=e.match(c);var h=lces.ui.RGB2HSV(t/255,i/255,n/255);while(d){var u=d[0].match(l);u=u?u[1]:u;var f=isNaN(u)||!u&&u!==0?false:true;var p=parseFloat(d[1]);var m=parseFloat(d[2])/100;var g=parseFloat(d[3])/100;var v=h.h+p;v=Math.round(v>360?v-360:v<0?v+360:v);var b=Math.max(Math.min(h.s+m,1),0);var S=Math.max(Math.min(h.v+g,1),0);var y=lces.ui.HSV2RGB(v,b,S).map(function(e){return parseInt(e*255)});var w="rgb"+(f?"a":"")+"("+y[0]+","+y[1]+","+y[2]+(f?","+u:"")+")";e=e.slice(0,d.index)+w+e.slice(d.index+d[0].length);d=e.match(c)}s.removeChild(s.childNodes[0]);s.appendChild(jSh.t(e))}return e};lces.css.appendTransition=function(e,t,i){t=t?t:"250ms";i=i?i:"ease-out";return e.replace(/\n(\s*)([a-z\-]+):\s*(rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*\d+(?:\.\d+)?\s*\)|#[a-z0-9]{3,6})\s*;/gi,"\n$1$2: $3;\n$1transition: $2 "+t+" "+i+";")}};lces.rc[0]=function(){window.undf=undefined;if(!window.console)Object.defineProperty(window,"console",{value:{log:function(){},error:function(){},table:{}},writable:false,configurable:false,enumerable:true});window.jSh=function t(e,i){if(typeof e==="string"){var n=this===window?document:this instanceof Node||t.MockupElement&&this instanceof t.MockupElement?this:lces&&this instanceof lcWidget?this.element:document;var s=t.determineSelector(e);return t.shorten(t[s](s==="queryAll"||s==="tag"?e:e.substr(1),n,i))}else{var r=t.determineType(e);if(!r)return false;if(i)new lcWidget(r);if(!r.jSh)t.shorten(r);return r}};jSh.type=function(e){return Object.prototype.toString.call(e).replace(/\[object\s([\w\d]+)\]/,"$1").toLowerCase()};jSh.pushItems=function(e){var t=jSh.toArr(arguments).slice(1);t.forEach(function(t){e.push(t)})};jSh.spliceItem=function(e){var t=jSh.toArr(arguments).slice(1);t.forEach(function(t){var i=e.indexOf(t);if(i!==-1)e.splice(i,1)})};jSh.toArr=function(e){return Array.prototype.slice.call(e)};jSh.oneOrArr=function(e){return e.length===1?e[0]:e};jSh.hasMultipleArgs=function(e,t){var i=false;t=t||this;if(e.length>1)i=jSh.toArr(e);if(jSh.type(e[0])==="array")i=e[0];return i?i.forEach(function(i){e.callee.call(t,i)})?true:true:false};jSh.extendObj=function(e,t,i){Object.getOwnPropertyNames(t).forEach(function(n){if(!i||i.indexOf(n)===-1)e[n]=t[n]});return e};jSh.inherit=function(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e};jSh.nChars=function(e,t){e=e+"";t=isNaN(t)?1:parseInt(t);var i="";for(var n=0;n<t;n++){i+=e}return i};jSh.parseJSON=function(e){var t;try{t=JSON.parse(e)}catch(i){console.warn(i);t={error:"JSON parse failed",data:null}}return t};jSh.filterHTML=function(e){e=e.replace(/&/g,"&amp;");e=e.replace(/</g,"&lt;");e=e.replace(/>/g,"&gt;");return e};jSh.d=function i(e,t,n,s,r,o){var a;if(!this.lcesElement){if(this.lcesType){var l=/^ns:[\w\d_]+:[^]+$/i.test(this.lcesType);if(!l)var c=jSh.e(this.lcesType);else{var a=this.lcesType.replace(/^ns:([\w\d_]+):[^]+$/i,"$1");var c=jSh.e(this.lcesType)}}else{var c=jSh.e("div")}}else{var c=this.lcesElement}if(typeof e=="object"){var d=e;e=d.className||d.class;t=d.text;n=d.child||d.children;s=d.attributes||d.attr;r=d.properties||d.prop||d.props;o=d.events}var h="";var u="";if(e){var f=/^(?:#[a-zA-Z\d\-_]+)?(?:\.[a-zA-Z\d\-_]+)+$|^#[a-zA-Z\d\-_]+(?:\.[a-zA-Z\d\-_]+)*$/;var p=/\.([a-zA-Z\d\-_]+)/g;var m=/#([a-zA-Z\d\-_]+)/;if(f.test(e)){if(p.test(e))u=jSh.toArr(e.match(p)).map(function(e){return e.substr(1)});if(m.test(e))h=e.match(m)[0].substr(1);if(u.length>0){if(!a)c.className=u.join(" ");else s["class"]=u.join(" ")}}else{if(!a)c.className=e;else s["class"]=e}}if(h)c.id=h;if(t){c[t.t?"innerHTML":"textContent"]=t.s?t.s:t;c[t.t?"_innerHTML":"_textContent"]=t.s?t.s:t}if(n){if(jSh.type(n)==="array"){n.forEach(function(e){c.appendChild(e)})}else c.appendChild(n)}var g=/^ns:[^:]+:[^]*$/i;if(s){for(attr in s){if(s.hasOwnProperty(attr)){if(!g.test(attr)||c instanceof jSh.MockupElement)c.setAttribute(attr,s[attr]);else{var v=attr.replace(/^ns:[^:]+:([^]*)$/i,"$1");var b=attr.replace(/^ns:([^:]+):[^]*$/i,"$1");c.setAttributeNS(v?v:null,b,s[attr])}}}}if(r){for(prop in r){if(r.hasOwnProperty(prop))c[prop]=r[prop]}}if(o){var S=Object.getOwnPropertyNames(o);S.forEach(function(e){if(jSh.type(S[e])==="array"){o[e].forEach(function(t){c.addEventListener(e,t)})}else{c.addEventListener(e,o[e])}})}return jSh(c)};jSh.c=function n(e,t,i,s,r,o){return jSh.d.call({lcesType:e},t,i,s,r,o)};jSh.e=function(e){var t=/^ns:[\w\d_]+:[^]+$/i.test(e);if(!t){return document.createElement(e)}else{var i=e.replace(/^ns:[\w\d_]+:([^]+)$/i,"$1");var n=e.replace(/^ns:([\w\d_]+):[^]+$/i,"$1");var s=document.createElementNS(i,n);s.nsElm=true;return s}};jSh.t=function(e){return document.createTextNode(e)};jSh.svg=function(e,t,i,n){return jSh.c("ns:svg:http://www.w3.org/2000/svg",e,undf,n,{version:"1.1",width:t,height:i})};jSh.path=function(e,t,i){return jSh.c("ns:path:http://www.w3.org/2000/svg",e,undf,undf,{"ns:d:":t,"ns:style:":i||""})};jSh.getChild=function(e,t){var i=jSh.toArr(this.childNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE?!jSh(e)||true:false});if(e<0)e=i.length+e;if(!i[e])return null;if(typeof t==="number"&&t>1)return i.slice(e,e+t);else return i[e]};jSh.isDescendant=function(e,t){var i=e.parentNode;var n=false;while(i!=document.body){if(i==t){n=true;break}i=i.parentNode}return n};jSh.onEvent=function(e,t,i){this.addEventListener(e,t,i)};jSh.shorten=function(e){var t=jSh.hasMultipleArgs(arguments);if(t)return arguments.length===1?e:jSh.toArr(arguments);if(e&&!e.getChild){e.getChild=jSh.getChild;e.on=jSh.onEvent;e.jSh=jSh;e.__apch=e.appendChild;e.__rmch=e.removeChild;e.appendChild=function(t){if(jSh.hasMultipleArgs(arguments,this))return undf;e.__apch(t)};e.removeChild=function(t){if(jSh.hasMultipleArgs(arguments,this))return undf;e.__rmch(t)}}return e};jSh.id=function(e,t){return(jSh.MockupElement&&t instanceof jSh.MockupElement?t:document).getElementById(e)};jSh.class=function(e,t){return jSh.toArr(t.getElementsByClassName(e))};jSh.tag=function(e,t){return jSh.toArr(t.getElementsByTagName(e))};jSh.name=function(e){return jSh.toArr(document.getElementsByName(e))};jSh.placeholder=function(e,t){return jSh.oneOrArr(jSh.toArr(t.getElementsByTagName("lces-placeholder")).filter(function(t){return t.phName&&t.phName.toLowerCase()===e.toLowerCase()}))};jSh.queryAll=function(e,t,i){return jSh.toArr(t[i?"querySelector":"querySelectorAll"](e))};jSh.isID=/^#[^\s()\[\]*:{}]+$/i;jSh.isClass=/^\.[^\s()\[\]*:{}]+$/i;jSh.isTag=/^[^\s()\[\]*:{}]+$/i;jSh.isPH=/^~[^\s()\[\]*:{}]+$/i;jSh.determineSelector=function(e){if(jSh.isID.test(e)){return"id"}else if(jSh.isClass.test(e)){return"class"}else if(jSh.isPH.test(e)){return"placeholder"}else if(jSh.isTag.test(e)){return"tag"}else{return"queryAll"}};jSh.determineType=function(e){if(!e)return false;if(e instanceof Node)return e;if(jSh.MockupElement&&e instanceof jSh.MockupElement)return e;if(e instanceof lcWidget&&e.element instanceof Node)return e.element;return null};var e=jSh};lces.rc[1]=function(){window.qsmoothp=function(e){var t=this;t.qsmoth={pro:0};t.qsmooth=function(e){if(void 0==e.pro){var i=e.n,n=e.n1,s=(n-i)*(void 0!=e.speed&&"number"==typeof e.speed?e.speed:.1),r=s+i;e.func(r);t.qsmoth.pro+=1;var o=t.qsmoth.pro;t.timeOut=setTimeout(function(){t.qsmooth({func:e.func,n:i,n1:n,pro:o,cur:r,off:s,end:e.end,endarg:e.endarg,noRound:e.noRound,checkIncr:e.checkIncr})},33)}else{if(e.pro!=t.qsmoth.pro)return!1;if(e.n!=e.n1){var a=false;var i=e.n,n=e.n1,l=e.off,c=-1*e.checkIncr,c=n<i?c:e.checkIncr,d=!1,h=!1,u=l*(1-(e.cur-i)/(n-i))+e.cur;n<i?c+u<=e.n1&&(d=!0):c+u>=e.n1&&(d=!0);n<i?u<=e.n1&&(h=!0):u>=e.n1&&(h=!0)}else var a=true;if(a||!e.noRound&&Math.round(u)==n||u==n||h||void 0!=e.checkIncr&&"number"==typeof e.checkIncr&&d)e.func(a?e.n1:n),"function"==typeof e.end&&(arguments=void 0!=e.endarg?e.endarg:void 0,e.end(arguments));else{if(isNaN(e.cur))return!1;e.func(u);t.timeOut=setTimeout(function(){t.qsmooth({func:e.func,pro:e.pro,cur:u,off:l,n:i,n1:n,end:e.end,endarg:e.endarg,noRound:e.noRound,checkIncr:e.checkIncr})},38)}}};this.timeOut=null;this.qsmooth(e)};window.qsFadein=function(e,t,i,n,s,r,o,a){return new qsmoothp({func:e,n:t,n1:i,off:r?r:.2,speed:n?n:.032,noRound:void 0!=o?o:!0,checkIncr:void 0!=a?a:.001,end:void 0!=s?s:void 0})};window.clearQS=function(e){if(e&&e.qsmoth)e.qsmoth.pro=0}};lces.rc[2]=function(){window.LCESVar=function(e){this.LCESVAR=true;this.id=e};window.LV=function(e){return new LCESVar(e)};window.isLV=function(e){return e instanceof LCESVar};window.LCES={EXTENDED_COMPONENT:LV(5),BASE_COMPONENT:LV(6),components:[],isExtended:function(e){return isLV(e[e.length-1])&&e[e.length-1]===LCES.EXTENDED_COMPONENT}};window.lcComponentMethods={setState:function(e,t,i,n){if(!this.states[e]){this.states[e]={component:this,name:e,set:function(t){this.component.setState(e,t)},stateStatus:t,oldStateStatus:{nullStuff:null},get:function(){return this.stateStatus},functions:[],conditions:[],getter:null,data:{},"private":false,flippedStateCall:false,linkedStates:{}};var s=this;Object.defineProperty(this,e,{configurable:true,set:function(t){s.setState(e,t)},get:function(){return s.getState(e)}})}var r=this.states[e];var o=true;for(var a=0,l=r.conditions.length;a<l;a++){o=r.conditions[a].call(r,t,n);if(!o)return false}if(r.stateStatus===t&&!i)return false;r.oldStateStatus=r.stateStatus;r.stateStatus=t;for(var c=0,d=r.functions.length;c<d;c++){r.functions[c].call(r,t,i)}return true},getState:function(e){if(!this.states[e])return false;return typeof this.states[e].get==="function"?this.states[e].get.call(this.states[e]):this.states[e].stateStatus},hasState:function(e,t){if(!this.states[e]&&t)throw ReferenceError("No such state");return!!this.states[e]},addStateListener:function(e,t){if(!this.states[e]){this.setState(e,undf);console.warn(e+" doesn't exist")}this.states[e].functions.push(t)},addStateCondition:function(e,t){if(this.states[e]){this.states[e].conditions.push(t)}else throw ReferenceError("No such state")},addGroupLink:function(e){e.addMember(this)},removeGroupLink:function(e){e.removeMember(this)},removeStateListener:function(e,t){if(!this.states[e])throw ReferenceError("No such state");var i=this.states[e];for(var n=0,s=i.functions.length;n<s;n++){if(i.functions[n]===t){i.functions.splice(n,1);return true}}return false},removeAllStateListeners:function(e){if(!this.states[e])throw ReferenceError("No such state");this.states[e].functions=[];return true},removeAllStateConditions:function(e){if(!this.states[e])throw ReferenceError("No such state");this.states[e].conditions=[];return true},removeState:function(e){if(jSh.hasMultipleArgs(arguments,this))return;if(!this.states[e])throw ReferenceError("No such state");var t=this;for(linkedState in this.states[e].linkedStates){if(this.states[e].linkedStates.hasOwnProperty(linkedState))t.unlinkStates(e,linkedState)}delete this.states[e];delete this[e]},linkStates:function(e,t,i){var n=this;if(!this.states[e])this.setState(e,"");if(!this.states[t])this.setState(t,"");if(this.states[e].linkedStates[t]||this.states[t].linkedStates[e])this.unlinkStates(e,t);function s(s){if(!i&&n.getState(e)===n.getState(t))return true;if(s===t)n.setState(e,i?i(n.getState(t)):n.getState(t));else if(s===e&&!i)n.setState(t,n.getState(e))}this.states[e].linkedStates[t]=s;this.states[t].linkedStates[e]=s;this.setState(t,this.getState(e));this.addStateListener("statechange",s)},unlinkStates:function(e,t){if(!this.states[e]||!this.states[e])throw ReferenceError("No such state");if(!this.states[e].linkedStates[t])throw TypeError("["+e+"] isn't linked to ["+t+"]");this.removeStateListener("statechange",this.states[e].linkedStates[t]);delete this.states[e].linkedStates[t];delete this.states[t].linkedStates[e];return true},hardLinkStates:function(e,t){if(!this.states[t])throw ReferenceError("No such state");if(this.states[e])removeState(e);var i=this;this.states[e]=this.states[t];Object.defineProperty(this,e,{configurable:true,set:function(t){i.setState(e,t)},get:function(){return i.getState(e)}})},copyState:function(e,t){if(!this.states[e])throw ReferenceError("No such state");if(this.states[t])this.removeState(t);this.setState(t,null);var i=Object.create(this.states[e]);this.states[t]=i},extend:function(e){var t=[];for(var i=1,n=arguments.length;i<n;i++){t.push(arguments[i])}var s={component:this};this.extensionData.push(s);e.apply(this,t.concat([s,LCES.EXTENDED_COMPONENT]))},dataSetState:function(e,t,i){this._setState(e,t,i)},addEvent:function(e){if(!e||jSh.type(e)!=="string"||this.events[e])return false;this.events[e]={name:e,listeners:[]}},removeEvent:function(e){if(!e||jSh.type(e)!=="string"||!this.events[e])return false;this.events[e]=undf},triggerEvent:function(e,t){if(!e||jSh.type(e)!=="string"||!this.events[e])return false;if(!t||jSh.type(t)!=="object")throw Error(e+" cannot be triggered without an EventObject");this.events[e].listeners.forEach(function(e){try{e(t)}catch(i){console.error(i)}})},on:function(e,t){if(typeof t!=="function")return false;if(!this.events[e])this.addEvent(e);var i=this.events[e];i.listeners.push(t)},removeListener:function(e,t){if(!e||jSh.type(e)!=="string"||!this.events[e])return false;var i=this.events[e].listeners.indexOf(t);if(i!==-1)this.events[e].listeners.splice(i,1)}};window.lcComponent=function(){if(this.type)return true;this.type="LCES Component";this.isLCESComponent=true;this.LCESID=LCES.components.length;LCES.components.push(lces.noReference?null:this);this.states={};this.dataLinks=[];this.extensionData=[];var e=this;jSh.extendObj(this,lcComponentMethods);this.setState("LCESName","");this.addStateListener("LCESName",function(t){if(t)LCES.components[t]=e});this.addStateCondition("LCESName",function(e){if(this.get()){if(this.get()===e)return false;LCES.components[this.get()]=undefined}return true});this.setState("statechange","statechange");this.setState("newstate","newstate");this._setState=this.setState;this.setState=function(e,t,i){if(!i&&this.states[e]&&this.states[e].stateStatus===t){this._setState(e,t,i,true);return false}var n=false;if(!this.states[e])n=true;if(!this.states[e]||!this.states[e].flippedStateCall){this._setState(e,t,i);if(this.states[e].oldStateStatus!==this.states[e].stateStatus)this._setState("statechange",e,true)}else{if(this.states[e].oldStateStatus!==this.states[e].stateStatus)this._setState("statechange",e,true);this._setState(e,t,i)}if(n)this._setState("newstate",e,true)};this.groups=[];this.events=[];return false};var e={addMember:function(e){var t=this;var i=arguments;if(jSh.type(e)=="array")return e.forEach(function(e){i.callee.call(t,e)});if(jSh.toArr(arguments).length>1)return jSh.toArr(arguments).forEach(function(e){i.callee.call(t,e)});this.members.push(e);e.groups.push(this);e.addStateListener("statechange",this.memberMethod);this.setState("newmember",e,true)},removeMember:function(e){e.groups.splice(e.groups.indexOf(this),1);this.members.splice(this.members.indexOf(e),1);e.removeStateListener("statechange",this.memberMethod)},addExclusiveListener:function(e,t){if(!this.states[e])throw ReferenceError("No such state");if(jSh.type(t)!=="function")throw TypeError("Listener "+t+" is not of type 'function'");this.states[e].exclusiveFunctions.push(t)},removeExclusiveListener:function(e,t){if(!this.states[e])throw ReferenceError("No such state");if(this.states[e].exclusiveFunctions.indexOf(t)!==-1)this.states[e].splice(this.states[e].exclusiveFunctions.indexOf(t),1)}};lcComponent.prototype={__lcComponent__:1};lcComponent.prototype.constructor=lcComponent;window.lcGroup=function(){var t=lcComponent.call(this);if(!t)this.type="LCES Group";var i=this;this.members=[];this.lastTrigger={};jSh.extendObj(this,e);this.recurring=true;this.recurringMemberTrigger=true;this.memberMethod=function(e){if(i.states[e]&&e!=="LCESName"){i.lastTrigger[e]=this.component;i.setState(e,i.states[e].isExclusive?i.getState(e):this.component.getState(e),i.recurringMemberTrigger)}};this.setState("newmember",null);this.addStateListener("statechange",function(e){for(var t=0,n=i.members.length;t<n;t++){if(i.members[t].states[e]&&!i.exclusiveMembers[e]){i.members[t]._setState(e,i.getState(e));i.members[t]._setState("statechange",e,true)}else if(i.members[t].states[e]&&i.exclusiveMembers[e]){i.members[t]._setState(e,i.isExclusiveMember(e,i.members[t])?!i.getState(e):i.getState(e));i.members[t]._setState("statechange",e,true)}}});this.addStateListener("newstate",function(e){i.states[e].isExclusive=false;i.states[e].exclusiveFunctions=[]});this.onExclusiveStateChange=function(){var e=this;var t=i.exclusiveMembers[this.name];if(t.indexOf(i.lastTrigger[this.name])===-1){if(t.length===t.memberLimit){t[t.length-1]._setState(this.name,this.get());t.splice(t.length-1,1)}t.splice(0,0,i.lastTrigger[this.name])}this.exclusiveFunctions.forEach(function(t){t.call(e,i.lastTrigger[e.name])})};this.setExclusiveState=function(e,t,i){this.states[e].isExclusive=true;this.exclusiveMembers[e]=[];this.exclusiveMembers[e].memberLimit=i;this.setState(e,!t);this.addStateListener(e,this.onExclusiveStateChange)};this.exclusiveMembers={};this.isExclusiveMember=function(e,t){if(!this.hasState(e,true)||!this.exclusiveMembers[e])return false;return this.exclusiveMembers[e].indexOf(t)!==-1}};jSh.inherit(lcGroup,lcComponent);window.lcData=function(){var e=lcComponent.call(this);if(!e)this.type="LCES Data Link";var t=this;this.onchange=function(e){var t={};t[e]=this.get();var i=new lcRequest({method:"post",uri:"/action",query:t,form:true});i.send()};this.addStateListener("newstate",function(e){t.addStateListener(e,function(){t.onchange.call(this,e)})})};window.lcRequest=function(e){var t=lcComponent.call(this);if(!t)this.type="LCES Request";var i=this;this.xhr=new XMLHttpRequest;var n=this.xhr;this.abort=n.abort.bind(n);n.onreadystatechange=e.callback;if(e.setup&&typeof e.setup==="function")e.setup.call(n);if(e.query){var s="";function r(e){if(jSh.type(e)==="array")return encodeURIComponent(e.join(","));if(jSh.type(e)!=="object")return encodeURIComponent(e.toString());var t="";for(prop in e){if(e.hasOwnProperty(prop)){switch(jSh.type(e[prop])){case"string":t+="&"+prop+"="+encodeURIComponent(e[prop]);break;case"number":t+="&"+prop+"="+e[prop];break;case"array":t+="&"+prop+"="+encodeURIComponent(e[prop].join(";"));break;case"object":t+="";break;case"null":t+="&"+prop+"=null";break;case"undefined":t+="";break;default:t+=""}}}return t}s=r(e.query).substr(1)}else{s=e.formData||""}var o=!e.method||e.method.toLowerCase().indexOf("get")!=-1?"GET":"POST";n.open(o,(e.uri||e.url)+(o=="GET"?s?"?"+s:"":""),e.async!==undf?e.async:true);if(e.form)n.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this.send=function(){n.send(o=="POST"?s:undf)}};jSh.inherit(lcRequest,lcComponent);if(!window.lces)window.lces=function(e){return LCES.components[e]};lces.types={};lces.noReference=false;lces.new=function(e,t){var i=e&&lces.types[e.toLowerCase()]?e.toLowerCase():null;var n=i?new lces.types[i](t):new lcComponent(t);return n};lces.initSystem=function(){var e=this;this.preInitFunctions=[];this.initFunctions=[];this.postInitFunctions=[];this.initPriority={0:this.preInitFunctions,1:this.initFunctions,2:this.postInitFunctions};jSh.extendObj(this,lces.initSystem.methods);this.initiated=null;this.init=function(){if(this.initiated)return false;this.initiated=true;var t=Object.getOwnPropertyNames(this.initPriority);t.forEach(function(t){var i=e.initPriority[t];i.forEach(function(e){try{e()}catch(t){console.error(t)}})})}};lces.initSystem.methods={getInitPriority:function(e){return!isNaN(e)&&this.initPriority[e]?this.initPriority[e]:this.initPriority[1]},addInit:function(e,t){t=this.getInitPriority(t);if(jSh.type(e)!=="function")throw TypeError("LCES Init: Init Function isn't a function");t.push(e)},removeInit:function(e,t){t=this.getInitPriority(t);var i=t.indexOf(e);if(i>=0)t.splice(i,1)},insertInit:function(e,t,i){i=this.getInitPriority(i);if(jSh.type(e)!=="function")throw TypeError("LCES Init: Init function provided isn't a function");var n=i.indexOf(t);if(n>=0)i.splice(n,0,e)},replaceInit:function(e,t,i){i=this.getInitPriority(i);if(jSh.type(e)!=="function")throw TypeError("LCES Init: Init function provided isn't a function");var n=i.indexOf(func);if(n>=0)i.splice(n,1,e)}};lces.initSystem.call(lces)};function lcesAppendCSS(e,t){var i=document.createElement("style");i.className=e;i.appendChild(document.createTextNode(t));document.getElementsByTagName("head")[0].appendChild(i);return i}lcesAppendCSS("lces-core-styles",'.lces-themify{font-family:Arial;}br2{position:relative;display:block;padding:0px;margin:0px;height:10px;}.lces-themify hr{border-top:0px;border-style:solid;opacity:0.75;}.lces-themify a{font-weight:normal;text-decoration:none;}.lces-themify label{font-weight:bold;}@font-face{font-family:"CODE";src:url(http://b-fuze.github.io/lces/main-css/codebold.otf);}@font-face{font-family:"Lato";src:url(http://b-fuze.github.io/lces/main-css/lato-reg.ttf);}@font-face{font-family:"Righteous";src:url(http://b-fuze.github.io/lces/main-css/righteous.ttf);}@font-face{font-family:"Couture";src:url(http://b-fuze.github.io/lces/main-css/couture-bld.otf);}.lces-themify h1,.lces-themify h2,.lces-themify h3,.lces-themify h4,.lces-themify h5,.lces-themify h6{margin:0px;margin-bottom:10px;font-family:Lato;font-weight:normal;}.lces-themify h1{font-size:2.25em;}.lces-themify h2{font-size:2em;}.lces-themify h3{font-size:1.75em;}.lces-themify h4{font-size:1.5em;}.lces-themify h5{font-size:1.25em;}.lces-themify h6{font-size:1.125em;}.lces-themify .lc-centertext{text-align:center;}.lces-themify .lc-indent{margin-left:15px;margin-right:15px;}.lces-themify .lc-inlineblock{display:inline-block;}lces-placeholder{display:none;}.lcescontrol{position:relative;opacity:1;transition:opacity 200ms ease-out;}.lcescontrol[disabled]{opacity:0.5;cursor:default !important;}.lcescontrol[disabled] *{cursor:default !important;}.lcescontrol .lcescontrolclick{position:absolute;left:0px;top:0px;right:0px;bottom:0px;z-index:1000;display:none;}.lces-notification>div{background:transparent;transition:height 400ms ease-out;overflow:hidden;}.lces-themify::-webkit-input-placeholder{color:#BFBFBF;font-style:italic;font-weight:normal;}.lces-themify:-moz-placeholder{color:#BFBFBF;font-style:italic;font-weight:normal;}.lces-themify::-moz-placeholder{color:#BFBFBF;font-style:italic;font-weight:normal;}.lces-themify:-ms-input-placeholder{color:#BFBFBF;font-style:italic;font-weight:normal;}.lces-numberfield::-webkit-input-placeholder{font-style:normal;}.lces-numberfield:-moz-placeholder{font-style:normal;}.lces-numberfield::-moz-placeholder{font-style:normal;}.lces-numberfield:-ms-input-placeholder{font-style:normal;}input.lces[type="text"],input.lces[type="password"]{vertical-align:middle;}input.lces[type="text"],input.lces[type="password"],textarea.lces{padding:3px;min-width:150px;height:auto;outline:0px;border:2px solid #000;border-radius:3px;color:#262626;background-color:#fff;font-size:14px;font-family:"Trebuchet MS";resize:none;}input.lces[type="text"]:disabled,input.lces[type="password"]:disabled{background-color:#F2F2F2;}.numberfield-container{position:relative;display:inline-block;}input.lces.lces-numberfield{font-size:14px;font-weight:bold;text-align:center;border-right-width:16px;border-top-right-radius:4px;border-bottom-right-radius:4px;}.numberfield-container .arrow{width:16px;height:50%;position:absolute;right:0px;cursor:pointer;background:rgba(0,0,0,0);}.numberfield-container .arrow.active{background:rgba(0,0,0,0.1);}.numberfield-container .arrow svg{position:absolute;top:0px;right:0px;bottom:0px;left:0px;margin:auto auto;opacity:0.85;transition:opacity 200ms ease-out;}.numberfield-container .arrow:hover svg{opacity:1;}.numberfield-container .arrow.top{top:0px;border-top-right-radius:4px;}.numberfield-container .arrow.bottom{bottom:0px;border-bottom-right-radius:4px;}.lces-slider{position:relative;top:-3px;vertical-align:middle;display:inline-block;border:2px solid #000;border-radius:5px;height:28px;width:138px;overflow:hidden;background:#fff;line-height:normal;}.lces-slider-min,.lces-slider-max,.lces-slider-value{position:absolute;top:4px;font-family:Righteous;font-size:16px;color:#D9D9D9;}.lces-slider-min{left:5px;}.lces-slider-max{right:5px;}.lces-slider-value{right:0px;left:0px;text-align:center;color:#f00;opacity:0.25;}.lces-slider-scrubbar{position:absolute;top:0px;right:0px;bottom:0px;left:0px;}.lces-slider-scrubber{position:absolute;top:1px;left:0px;margin:0px 0px 0px 1px;width:15px;height:26px;border-radius:3.5px;background:#000;opacity:0.75;transition:opacity 250ms ease-out;}.lces-slider.animated .lces-slider-scrubber{transition:opacity 250ms ease-out,left 150ms cubic-bezier(.1,.41,0,.99);}.lces-slider-scrubbar:hover .lces-slider-scrubber,.lces-slider.scrubbing .lces-slider-scrubber{opacity:1;}.lces-colorchooser{position:relative;top:-3px;vertical-align:middle;display:inline-block;}.lces-colorchooser .lces-cc-display{display:inline-block;height:26px;width:46px;border-radius:4px;border:2px solid #000;}.lces-colorchooser .lces-cc-color{margin:4px;width:38px;height:18px;border-radius:1px;background:#000;cursor:pointer;}.lces-colorchooser-modal{position:absolute;z-index:20000000;top:0px;left:0px;margin:5px 0px 0px 0px;border-radius:5px;background:rgba(255,255,255,0.95);overflow:hidden;box-shadow:0px 2px 5px rgba(0,0,0,0.25);opacity:0;transform-origin:0% 0%;transform:scale(0.85);transition:transform 250ms ease-out,opacity 250ms ease-out;}.lces-colorchooser-modal.flipped{margin:0px;transform-origin:0% 100%;}.lces-colorchooser-modal.visible{opacity:1;transform:scale(1);}.lces-colorchooser-modal .lces-cc-section{padding:15px;}.lces-colorchooser-modal .lces-cc-section.lces-cc-controls{padding-top:0px;padding-bottom:0px;background:#F2F2F2;}.lces-colorchooser-modal .lces-cc-wheel{position:relative;width:180px;height:180px;border-radius:100%;background-color:#F2F2F2;background-size:100%;}.lces-colorchooser-modal .lces-cc-wheel-value{position:absolute;left:0px;top:0px;width:100%;height:100%;border-radius:100%;background:#000;opacity:0;}.lces-colorchooser-modal .lces-cc-cursor{position:absolute;width:10px;height:10px;border-radius:100%;background:#fff;border:1px solid #000;}.lces-colorchooser-modal .lces-cc-row{overflow:auto;}.lces-colorchooser-modal .lces-cc-label{float:left;display:block;width:16px;font-family:Couture;font-size:25px;color:#808080;background:#e5e5e5;padding:10px 7px 5px 7px;cursor:default;margin-right:10px;}.lces-colorchooser-modal .lces-slider{margin-top:7px;border-width:1px;}.lces-file *{cursor:pointer !important;}.lces-file input[type="file"]{position:absolute;margin:0px;width:100%;height:100%;opacity:0;z-index:5;cursor:pointer !important;}.lces-file{position:relative;display:block; padding:0px 33px 0px 0px;height:36px;width:123px;border-radius:3px;background-color:#000;font-family:Arial;font-weight:bold;font-size:14px;cursor:pointer !important;}.lces-file>div{position:absolute;top:0px;left:0px;right:33px;bottom:0px;}.lces-file>div>div{display:table;width:100%;height:100%;}.lces-file>div>div>div{display:table-cell;vertical-align:middle;}.lces-file>div>div>div>div{text-align:center;color:#fff;}.lces-file>aside{position:absolute;right:0px;top:0px;bottom:0px;padding:8px;border-top-right-radius:3px;border-bottom-right-radius:3px;background:rgba(0,0,0,0.25);transition:background 200ms ease-out;}.lces-file:hover>aside{background:rgba(0,0,0,0.15);}.lces-file:active>aside{background:rgba(0,0,0,0.5);}.lces-themify button{position:relative;font-family:Arial;font-size:14px;font-weight:bold;outline:0px;border-radius:3px;margin:0px 10px 10px 0px;padding:5px 10px;border:0px;color:#fff;background:#000;cursor:pointer;}.lces-themify button:before,.lces-file:after{content:"";position:absolute;top:0px;left:0px;width:100%;height:100%;border-radius:3px;background:rgba(255,255,255,0);transition:background 100ms ease-out;}.lces-themify button:hover:before,.lces-file:hover:after{background:rgba(255,255,255,0.2);}.lces-themify button:active:before,.lces-file:active:after{background:rgba(0,0,0,0.075);transition:background 0ms ease-out !important;}.lcesradio{position:relative;top:1px;width:12px;height:11px;margin:2px;display:inline-block;}.lcesradio .radiobuttoncolor{fill:#000;}.lcesradio svg path:last-child{opacity:0;transition:opacity 150ms ease-out;}.lcesradio[checked] svg path:last-child{opacity:1;}.lcescheckbox{position:relative;vertical-align:middle;width:14px;height:14px;margin:2px;display:inline-block;}.lcescheckbox .checkboxcolor{fill:#000;}.lcescheckbox svg path:last-child{opacity:0;transition:opacity 150ms ease-out;}.lcescheckbox[checked] svg path:last-child{opacity:1;}.lcesdropdown{position:relative;vertical-align:middle;top:-3px;margin:0px;display:inline-block;min-width:98px;padding:3px;border:2px solid #000;border-width:2px 27px 2px 2px;border-radius:3px;text-align:left;font-size:14px;font-weight:bold;line-height:1.2;background:#fff;cursor:default;}.lcesdropdown .lcesdropdown-arrow{position:absolute;top:9px;right:-18px;height:6px;width:10px;}.lcesdropdown .lcesdropdown-arrow svg{position:absolute;transform:scaleY(1.2);}.lcesdropdown .lcesoptions{position:absolute;z-index:600000;top:100%;left:-2px;right:-27px;border:0px solid #000;border-width:2px;border-bottom-right-radius:3px;border-bottom-left-radius:3px;font-weight:bold;background:#fff;box-shadow:0px 2px 3px rgba(0,0,0,0.2);transform-origin:50% 0%;transform:scale(0.85);opacity:0;display:none;transition:transform 250ms ease-out,opacity 250ms ease-out;}.lcesdropdown.visible .lcesoptions{opacity:1;transform:scale(1);}.lcesdropdown.flipped .lcesoptions{transform-origin:50% 100%;top:auto;bottom:100%;border-radius:0px;border-top-right-radius:3px;border-top-left-radius:3px;}.lcesdropdown .lcesselected{}.lcesoption{position:relative;padding:3px;margin-bottom:1px;background:rgba(0,0,0,0);color:#484848;transition:background-color 200ms ease-out;}.lcesoption:after{position:absolute;content:"";top:100%;left:2px;right:2px;height:1px;background:#000;opacity:0.5;}.lcesoption:hover,.lcesoption[lces-selected]{background:rgba(0,0,0,0.05);}.lcesoption:last-child{margin-bottom:0px;}.lcesoption:last-child:after{height:0px;}.lces-themify table{border-spacing:0px;font-family:Arial;}table.lces thead th{position:relative;border:0px;border-top:3px solid #000;border-bottom:3px solid #000;padding:7px 10px;font-size:13px;}table.lces thead th:before{position:absolute;content:"";left:0px;top:10%;bottom:10%;width:1px;background:#000;}table.lces thead th:first-child:before{width:0px;}table.lces tr{padding:0px;margin:0px;border:0px;background:#fff;}table.lces tr[checker]{}table.lces tr td{border:0px;padding:10px;}.lces-window{position:fixed;z-index:1000000;top:0px;left:0px;opacity:0;color:#484848;line-height:1.6;transition:opacity 400ms ease-out;}.lces-window[visible]{opacity:1;}.lces-window[window-invisible]{margin-left:-9999999%;}.lces-window>div{padding:0px;}.lces-window>div>div{background:#fff;overflow:hidden;border-radius:4px;box-shadow:0px 2px 5px rgba(0,0,0,0.25);}.lces-window .lces-window-title{padding:15px 10px;font-family:Arial;font-size:14px;font-weight:bold;color:#000;background:rgba(0,0,0,0.1);cursor:default;}.lces-window .lces-window-contents{padding:25px 20px 30px 20px;}.lces-window .lces-window-buttonpanel{padding:10px;text-align:right;background:rgba(0,0,0,0.1);}.lces-window .lces-window-buttonpanel button{margin-bottom:0px;}.lces-window .lces-window-buttonpanel button:last-child,.lces-window .lces-window-buttonpanel div:last-child button{margin:0px;}.lces-notification{border-radius:3px;position:static;width:275px;box-shadow:0px 2px 3px rgba(0,0,0,0.2);cursor:default;}.lces-notification[visible]{opacity:0.9;}.lces-notification>div{padding:0px;margin:4px 0px;border:1px solid #000;border-radius:3px;background:#fff;overflow:hidden;}.lces-window.lces-notification>div>div{background:rgba(0,0,0,0.025);box-shadow:none;}.notification-alignment.notifi-relative .lces-notification>div{margin:0px !important;}.notification-alignment{position:fixed;z-index:1000000;}.notification-alignment.notifi-relative{position:static !important;}.notifi-top{top:5px;}.notifi-bottom{bottom:5px;}.notifi-middle{top:45%;}.notifi-right{right:5px;text-align:right;}.notifi-left{left:5px;}.notifi-center{left:5px;right:5px;text-align:center;}.notifi-center .lces-notification{margin-right:auto;margin-left:auto;}.lces-accordion{display:block;margin:0px 0px 10px 0px;}.lces-accordion .lces-acc-section{display:block;border:1px solid rgba(0,0,0,0.25);border-radius:3px;overflow:hidden;margin:0px 0px 5px 0px;}.lces-accordion .lces-acc-section .lces-acc-title{display:block;padding:5px;font-weight:bold;font-size:13px;background:rgba(0,0,0,0.25);border:0px;border-bottom:0px solid rgba(0,0,0,0.05);cursor:pointer;}.lces-accordion .lces-acc-section.lces-acc-open .lces-acc-title{border-bottom-width:1px;}.lces-accordion .lces-acc-section .lces-acc-title .lces-acc-arrow{position:relative;top:3px;display:inline-block;width:15px;height:15px;transform:rotate(0deg);padding:0px;margin:0px;margin-right:5px;transition:transform 500ms cubic-bezier(.1,.41,0,.99);}.lces-accordion .lces-acc-section.lces-acc-open .lces-acc-title .lces-acc-arrow{transform:rotate(90deg);}.lces-accordion .lces-acc-section .lces-acc-title .lces-acc-arrow svg{margin:0px;}.lces-accordion .lces-acc-section .lces-acc-contents>div{padding:10px;}.lces-accordion .lces-acc-section .lces-acc-contents{overflow:hidden;height:0px;transition:height 500ms cubic-bezier(.1,.41,0,.99);}.lces-accordion .lces-acc-section.lces-acc-open .lces-acc-contents{overflow:auto;}');
lcesAppendCSS("lces-responsive-styles","@media screen and (max-width:560px){.no-mobile{display:none;}.lces-window:not(.lces-notification):not([window-invisible]){top:0px !important;bottom:0px ;left:0px !important;right:0px;margin:20px;}.lces-window:not(.lces-notification):not([window-invisible])>div{position:absolute;top:0px;right:0px;bottom:0px;left:0px;}.lces-window:not(.lces-notification):not([window-invisible])>div>div{position:relative;width:100% !important;height:100% !important;}.lces-window:not(.lces-notification):not([window-invisible])>div>div .lces-window-contents{}.lces-window:not(.lces-notification):not([window-invisible]) .lces-window-contents{position:absolute;top:0px;bottom:0px;right:0px;left:0px;width:auto !important;height:auto !important;overflow:auto;}.lces-window.lces-window-titlevisible:not(.lces-notification):not([window-invisible]) .lces-window-contents{top:52px;}.lces-window.lces-window-buttonsvisible:not(.lces-notification):not([window-invisible]) .lces-window-contents{bottom:46px;}.lces-window:not(.lces-notification):not([window-invisible]) .lces-window-buttonpanel{position:absolute;left:0px;right:0px;bottom:0px;}}");if(lces.appendColorize!==false)lcesAppendCSS("lces-themify-styles lces-ui-colorize-src",'.lcesoption:after,.lces-file,.lces-themify button,table.lces thead th:before,.lces-slider-scrubber{background-color: #800070;}.lces-acc-arrow svg,.checkboxsvg .checkboxcolor,.radiobuttonsvg .radionbuttoncolor,.genreremovesvg .genreremovecolor{fill: #800070;}.lcesoption:hover,.lcesoption[lces-selected],table.lces tr{background-color:rgba(128, 0, 112,0.125);}hr.lces,input.lces[type="text"],input.lces[type="password"],textarea.lces,.lcesdropdown,.lcesdropdown .lcesoptions,table.lces thead th,.lces-slider,.lces-colorchooser .lces-cc-display,.lces-notification>div{border-color: #800070;}.lces-accordion .lces-acc-section .lces-acc-title,.lces-window .lces-window-title,.lces-window .lces-window-buttonpanel{background-color:rgba(128, 0, 112,0.1);}.lces-themify a,.lces-themify h1,.lces-themify h2,.lces-themify h3,.lces-themify h4,.lces-themify h5,.lces-themify h6,.lcesdropdown,table.lces tr,.lces-user-text-color,.lces-window .lces-window-title{color: #800070;}.lces-accordion .lces-acc-section{border-color:rgba(128, 0, 112,0.5);}table.lces tr[checker]{background-color:rgba(128, 0, 112,0.02);}');var lcesHiddenStuff=lcesAppendCSS("lces-hidden-stuff",".lces-themify{opacity:0;}");lces.rc[50]=function(){lces.addInit(function(){lcesHiddenStuff.disabled="disabled";lces.themify.colorize.compile()})};lces.themify={colorize:function(e,t,i){var n;var s=[e,t,i].map(function(e){if(typeof e!=="number"||isNaN(e)||e<0||e>255)n=true;return Math.round(e)});if(n)return false;var r=jSh(".lces-themify-styles")[0];if(!r)return false;cssStr=lces.css.colorize(r,s[0],s[1],s[2]);r.removeChild(r.childNodes[0]);r.appendChild(jSh.t(cssStr))}};lces.themify.colorize.compile=function t(){var e=Array.prototype.slice.call(document.getElementsByClassName("lces-ui-colorize-src"));e.forEach(function(e){e.lcesColorizeSrc=e.childNodes[0].nodeValue;e.removeChild(e.childNodes[0]);var i=t.compileSrc(e.lcesColorizeSrc);var n=document.createTextNode(i);e.appendChild(n)})};lces.themify.colorize.compile.compileSrc=function(e){e=e.replace(/lc-rgbhsv\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+\s*\)/g,"rgb($1,$2,$3)");e=e.replace(/lc-rgbahsv\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+(\.\d+)?)\s*,\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+\s*\)/g,"rgba($1,$2,$3,$4)");return e};lces.rc[7]=function(){lces.ui.RGB2HSV=function(e,t,i){if(e===t&&t===i)return{h:0,s:0,v:e};var n=[e+"r",t+"g",i+"b"];var s=[n[0],n[1],n[2]].sort(function(e,t){return parseFloat(e)<parseFloat(t)?1:-1});var r=s.map(function(e){return parseFloat(e)});s=s.map(function(e){return e.substr(-1)});var o=(r[0]-r[2])/r[0];var a=r[0]/1;var l=r[0]-r[2];var c=60;switch(s[0]){case"r":c*=(t-i)/l%6;break;case"g":c*=(i-e)/l+2;break;case"b":c*=(e-t)/l+4;break}return{h:c,s:o,v:a}};lces.ui.HSV2RGB=function(e,t,i){var n=i*t;var s;var r=e/60;var o=n*(1-Math.abs(r%2-1));if(t===0)s=[0,0,0];else switch(Math.floor(r)){case 0:s=[n,o,0];break;case 1:s=[o,n,0];break;case 2:s=[0,n,o];break;case 3:s=[0,o,n];break;case 4:s=[o,0,n];break;case 5:s=[n,0,o];break}var a=i-n;return[s[0]+a,s[1]+a,s[2]+a]};lces.ui.colorChooserTemplate=lces.template({render:jSh.dm(".lces-colorchooser.visible",undf,[jSh.dm(".lces-cc-display",undf,[jSh.dm(".lces-cc-color")]),jSh.dm(".lces-colorchooser-modal",undf,[jSh.dm(".lces-cc-section",undf,[jSh.dm(".lces-cc-wheel",undf,[jSh.dm(".lces-cc-wheel-value"),jSh.dm(".lces-cc-cursor")])]),jSh.dm(".lces-cc-section.lces-cc-controls",undf,[jSh.dm(".lces-cc-row.lces-cc-saturation",undf,[jSh.dm(".lces-cc-label","S"),lcSlider({min:0,max:100,hideValue:true})]),jSh.dm(".lces-cc-row.lces-cc-value",undf,[jSh.dm(".lces-cc-label","V"),lcSlider({min:0,max:100,hideValue:true})])])])])});window.lcColorChooser=function(e){var t=lces.template.isChild(arguments,this);if(t)return t;lcTextField.call(this);var i=jSh("#lces-colorchoosermodalcontainer");if(!i){var i=jSh.d("#lces-colorchoosermodalcontainer.lces-themify");document.body.appendChild(i)}this.type="LCES Color Chooser Widget";var n=this;this.element=new lces.ui.colorChooserTemplate(this);var s=this.jSh(".lces-cc-color")[0];var r=this.jSh(".lces-cc-cursor")[0];var o=this.jSh(".lces-colorchooser-modal")[0];var a=this.jSh(".lces-cc-wheel")[0];var l=this.jSh(".lces-cc-wheel-value")[0];var c=this.jSh(".lces-slider")[0];var d=this.jSh(".lces-slider")[1];var h=this.jSh(".lces-cc-saturation")[0];var u=this.jSh(".lces-cc-value")[0];i.appendChild(o);o.style.display="block";a.style.backgroundImage="url(http://b-fuze.github.io/lces/main-img/colorchooser.png)";c.oldComponent=c.component;d.oldComponent=d.component;s.parentNode.component=this;s.component=this;o.component=this;a.component=this;c.component=this;d.component=this;c=c.oldComponent;d=d.oldComponent;c.value=100;d.value=100;var f=o.offsetHeight;var p=a.offsetWidth;var m=r.offsetWidth;var g=null;this.setState("modalVisible",false);this.addStateListener("modalVisible",function(e){if(e){var t=s.parentNode.getBoundingClientRect();if(innerHeight-t.bottom-15<f){o.classList.add("flipped");o.style.top=scrollY+t.top-f-5+"px";o.style.left=scrollX+t.left+"px"}else{o.classList.remove("flipped");o.style.top=scrollY+t.top+(t.bottom-t.top)+"px";o.style.left=scrollX+t.left+"px"}o.style.display="block";g=setTimeout(function(){o.classList.add("visible")},10)}else{clearTimeout(g);o.classList.remove("visible")}});onTransitionEnd(o,function(e){if(e.propertyName=="opacity"){var t=getComputedStyle(this)["opacity"];if(t==0)o.style.display="none"}});var v=null;s.addEventListener("mouseover",function(){v=setTimeout(function(){n.modalVisible=true;n.focused=true;v=null},500);this.addEventListener("mouseout",function e(){this.removeEventListener("mouseout",e);if(v)clearTimeout(v)})});s.addEventListener("click",function(){clearTimeout(v);v=null;n.modalVisible=true;n.focused=true});this.addStateListener("focused",function(e){if(!e){n.modalVisible=false}});this.removeState("value");this.updatingValue=false;var b=null;this.setState("value",[255,255,255]);this.addStateListener("value",function(e){if(n.updatingValue){n.updatingValue=false;return}if(!e||jSh.type(e)!=="array"||e.length<3)e=[255,255,255];e.forEach(function(t,i){if(i<3&&(jSh.type(t)!=="number"||isNaN(t)))e[i]=255});n.displayColor([e[0]/255,e[1]/255,e[2]/255])});this.displayColor=function(e){var t=lces.ui.RGB2HSV(e[0],e[1],e[2]);c.updatingSat=true;c.value=t.s*100;d.updatingVal=true;d.value=t.v*100;this.setCursor(t.h,t.s);s.style.background="rgb("+this.value.map(function(e){return Math.round(e)}).join(", ")+")";l.style.opacity=1-t.v};this.updateColorValue=function(){var e={};e.v=d.value/100;l.style.opacity=1-e.v;var t=p/2;var i=r.offsetLeft-t+m/2;var o=t-r.offsetTop-m/2;var a=Math.sqrt(Math.pow(r.offsetLeft-t+m/2,2)+Math.pow(t-r.offsetTop-r.offsetHeight/2,2));var h=Math.atan2(o,i)/Math.PI*180;h=h<0?360+h:h;if(a>t){this.setCursor(h,1);a=t}else if(this.limitSaturation){this.setCursor(h,this.limitSaturation);a=this.limitSaturation*t}e.s=a/t;c.updatingSat=true;c.value=e.s*100;e.h=h;n.updatingValue=true;var u=lces.ui.HSV2RGB(e.h,e.s,e.v);this.value=[parseInt(u[0]*255),parseInt(u[1]*255),parseInt(u[2]*255)];s.style.background="rgb("+this.value.map(function(e){return Math.round(e)}).join(", ")+")"};this.setCursor=function(e,t){var i=p/2;e=(e+90)/360*Math.PI*2;var n=Math.sin(e)*t*i+i-m/2;var s=Math.cos(e)*t*i+i-m/2;r.style.left=n+"px";r.style.top=s+"px"};c.addStateListener("value",function(e){if(c.updatingSat){c.updatingSat=false;return}var t=lces.ui.RGB2HSV(n.value[0]/255,n.value[1]/255,n.value[2]/255);n.setCursor(t.h,e/100);n.updateColorValue()});d.addStateListener("value",function(e){if(d.updatingVal||d.updatingValue){d.updatingVal=false;return}n.updateColorValue()});a.addEventListener("mousedown",function(e){e.preventDefault();function t(e){var t=a.getBoundingClientRect();e.preventDefault();r.style.left=Math.round(e.clientX-t.left-m/2)+"px";r.style.top=Math.round(e.clientY-t.top-m/2)+"px";n.updateColorValue()}t(e);window.addEventListener("mousemove",t);window.addEventListener("mouseup",function i(){window.removeEventListener("mousemove",t);window.removeEventListener("mouseup",i)})});this.addStateListener("disableValue",function(e){if(e)u.style.display="none";else u.style.display="block"});this.limitSaturation=null;this.addStateListener("disableSaturation",function(e){if(e){n.limitSaturation=c.s;h.style.display="none"}else n.limitSaturation=null;h.style.display="block"});this.value=[255,255,255];o.style.display="none";this.classList.remove("visible");if(e){var S=e.getAttribute("color");if(S&&/^\s*rgb\(\s*\d+,\s*\d+\s*,\s*\d+\s*\)\s*$/.test(S)){var y=S.match(/\d+/g);this.value=y.map(function(e){return parseInt(e)})}if(e.parentNode){e.parentNode.insertBefore(this.element,e);e.parentNode.removeChild(e)}}};jSh.inherit(lcColorChooser,lcTextField);jSh.extendObj(lces.types,{colorchooser:lcColorChooser})};lces.rc[6]=function(){window.lcForm=function(e){lcWidget.call(this,e||jSh.c("form"))};jSh.inherit(lcForm,lcWidget);window.lcTextField=function(e,t){lcWidget.call(this,e?e:jSh.c("input",{properties:{type:t?t:"text"}}));var i=this;this.type="LCES TextField Widget";if(this.element.type&&(this.element.type==="text"||this.element.type==="password"||this.element.type==="hidden")||this.element.tagName.toLowerCase()=="textarea"){this.classList.add("lces");this.element.addEventListener("input",function(){i.text=this.value});this.linkStates("text","value")}this.setState("focused",false);lces.focus.addMember(this);this.focus=function(){if(typeof i.element.focus==="function")i.element.focus();i.focused=true};this.blur=function(){if(typeof i.element.blur==="function")i.element.blur();i.focused=false};this.wrap=undf};jSh.inherit(lcTextField,lcWidget);lces.ui.sliderTemplate=lces.template({render:jSh.dm(".lces-slider",undf,[jSh.dm("lces-slider-min","{#min}"),jSh.dm("lces-slider-max","{#max}"),jSh.dm("lces-slider-value","{#prefix}{#displayValue}{#suffix}"),jSh.dm("lces-slider-scrubbar",undf,[jSh.dm("lces-slider-scrubber")])])});window.lcSlider=function(e){var t=lces.template.isChild(arguments,this);if(t)return t;lcTextField.call(this);this.type="LCES Slider Widget";var i=this;this.element=new lces.ui.sliderTemplate(this);this.element.component=this;document.body.appendChild(this.element);var n=this.jSh(".lces-slider-scrubbar")[0];var s=this.jSh(".lces-slider-scrubber")[0];var r=this.jSh(".lces-slider-value")[0];var o=n.offsetWidth;var a=s.offsetWidth;n.addEventListener("mousedown",function(e){e.preventDefault();var t=e.target||e.srcElement;var r=function(e,t){var s=n.getBoundingClientRect();i.triggerEvent("scrubberX",{scrubberTriggered:!t,x:e.clientX-s.left-a*.5});e.preventDefault()};r(e,!(t===s));i.classList.add("scrubbing");window.addEventListener("mousemove",r);window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",r);i.classList.remove("scrubbing")})});this.on("scrubberX",function(e){var t=o-a-2;var n=e.x<0?0:e.x;n=n>t?t:n;if(!e.valueTriggered){i.updatingValue=true;i.value=i.min+(i.max-i.min)*(n/(o-a-2))}else{i.states["value"].oldStateStatus=i.value;i.states["value"].stateStatus=i.min+(i.max-i.min)*(n/(o-a-2))}i.displayValue=Math.round(i.value*100)/100;if(!i.decimals)i.displayValue=Math.round(i.displayValue);if(!e.scrubberTriggered)i.classList.add("animated");else i.classList.remove("animated");n=n<0?0:n;s.style.left=n+"px"});this.removeState("text","value");this.addStateListener("value",function(e){if(i.updatingValue){i.updatingValue=false;return}if(typeof e==="number"){i.triggerEvent("scrubberX",{valueTriggered:true,x:(o-a)*((e-i.min)/(i.max-i.min))})}});this.addStateListener("hideValue",function(e){if(e)r.style.display="none";else r.style.display="block"});this.min=0;this.max=100;this.displayValue=0;this.decimals=true;document.body.removeChild(this.element);if(e){var l=e.getAttribute("min");var c=e.getAttribute("max");var d=e.getAttribute("prefix");var h=e.getAttribute("suffix");var u=e.getAttribute("hide-value");var f=e.getAttribute("decimals");if(!isNaN(parseFloat(l))){this.min=parseFloat(l);this.displayValue=this.min}if(!isNaN(parseFloat(c)))this.max=parseFloat(c);if(d)this.prefix=d;if(h)this.suffix=h;if(f&&f.toLowerCase()==="false")this.decimals=false;if(u&&u==="true")this.hideValue=true;if(e.parentNode){e.parentNode.insertBefore(this.element,e);e.parentNode.removeChild(e)}}};jSh.inherit(lcSlider,lcTextField);window.lcFileInput=function(e){lcTextField.call(this,jSh.d("lces-file",undf,[jSh.d(undf,undf,jSh.d(undf,undf,jSh.d(undf,undf,jSh.d("lces-filetext")))),jSh.c("aside")]));var t=this;var i=jSh.svg("cp-svg",17,20,[jSh.path(undf,"M0 0 0 20 17 20 17 5 12.5 5 12 5 12 4.5 12 0 0 0zm13 0 0 4 4 0-4-4zm-4.5 4 4.5 4.5-2.2 0 0 4.5-2.2 0-2.2 0 0-4.5L4 8.5 8.5 4zM4 15l9 0 0 1-9 0 0-1z","fill: #fff;")]);var n=e||jSh.c("input",{properties:{type:"file"}});if(n.parentNode)n.parentNode.insertBefore(this.element,n);this.element.appendChild(n);this.input=n;if(!n.name)n.name="file";var s=this.element.getChild(-2);s.appendChild(i);var r=this.element.getElementsByClassName("lces-filetext")[0];r.textContent="No file chosen";this.onchange=function(){if(n.files.length!==0)var e=n.files.length===1?n.files[0].name:"["+n.files.length+"] Files Selected";else var e="No file chosen";e=e.length>14?e.substr(0,12)+"...":e;r.textContent=e};var o=["change","input","focus","blur","click"];var a=this.addEventListener;this.addEventListener=function(e,i){e=(e+"").toLowerCase();if(o.indexOf(e)!==-1)t.input.addEventListener(e,i);else t.addEventListener(e,i)};this.upload=function(e,i,n,s){var r=new lcForm;r.append(t.input);if(jSh.type(i)==="array")i.forEach(function(e){r.append(e)});var o=new FormData(r.element);if(jSh.type(i)==="object")Object.getOwnPropertyNames(i).forEach(function(e){o.set(e,i[e])});var a=new lcRequest({method:"POST",uri:e,formData:o,callback:function(){if(typeof s==="function")s.call(this)}});if(a.xhr.upload&&typeof callback==="function"){a.xhr.upload.addEventListener("progress",function(e){callback.call(this,e)})}a.send();t.append(t.input);return a};n.addEventListener("change",this.onchange)};jSh.inherit(lcFileInput,lcTextField);window.lcTextArea=function(e){lcTextField.call(this,e?e:jSh.c("textarea","lces"));var t=this;this.type="LCES TextArea Widget";this.removeState("text","value");this.setState("value");this.hardLinkStates("text","value");this.addStateListener("text",function(e){t.element.value=e});this.states["text"].get=function(){return t.element.value};this.select=function(){this.element.select()}};jSh.inherit(lcTextArea,lcTextField);window.acceptableKeyCodes={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",37:"left_arrow",38:"up_arrow",39:"right_arrow",40:"down_arrow",46:"delete",8:"backspace",13:"enter",16:"shift",17:"ctrl",18:"alt",35:"end",36:"home",96:"numpad_0",97:"numpad_1",98:"numpad_2",99:"numpad_3",100:"numpad_4",101:"numpad_5",102:"numpad_6",103:"numpad_7",104:"numpad_8",105:"numpad_9",109:"subtract",110:"decimal_point",190:"period",189:"dash"};window.lcNumberField=function(e){lcTextField.call(this,e?e:jSh.c("input",{properties:{type:"text"}}));var t=this;this.type="LCES NumberField Widget";this.oldValue=this.text;this.style.minWidth="0px";this.classList.add("lces-numberfield");this.container=jSh.c("span","numberfield-container");if(this.parent)this.parent.insertBefore(this.container,this.element);this.container.appendChild(this.element);this.setState("min",-5);this.setState("max",100);this.setState("integer",false);this.setState("digits",0);this.setState("decimalPoints",0);var i=jSh.c("span",undf,"X",undf,{style:"font-size: 15px; font-weight: bold;"});document.body.appendChild(i);this._charWidth=i.offsetWidth;document.body.removeChild(i);this.addStateListener("digits",function(e){var i=t.digits===0?15:t.digits;var n=t.decimalPoints===0?15:t.decimalPoints;t.style.width=((!t.integer?n+1:0)+i)*t._charWidth+"px";t.testInt=new RegExp("^\\-?\\d{0,"+t.digits+"}$");t.testFloat=new RegExp("^\\-?\\d{0,"+t.digits+"}(?:\\.\\d{0,"+t.decimalPoints+"})?$")});this.addStateListener("decimalPoints",this.states["digits"].functions[0]);this.addStateListener("integer",this.states["digits"].functions[0]);this.testInt=new RegExp("^\\d{0,"+this.digits+"}$");this.testFloat=new RegExp("^\\d{0,"+this.digits+"}(?:\\.\\d{0,"+this.decimalPoints+"})?$");this.testInput=function(){if(t.integer&&!t.testInt.test(this.value)||!t.integer&&!t.testFloat.exec(this.value))this.value=t.oldValue;else if(jSh.type(t.min)=="number"&&parseFloat(this.value)<t.min)this.value=t.min;else if(jSh.type(t.max)=="number"&&parseFloat(this.value)>t.max)this.value=t.max;else t.oldValue=this.value};this.addEventListener("change",this.testInput);this.increment=function(){t.value=parseInt(t.element.value)+1;t.testInput.call(t.element)};this.decrement=function(){t.value=parseInt(t.element.value)-1;t.testInput.call(t.element)};this.addEventListener("keydown",function(e){if(acceptableKeyCodes[e.keyCode.toString()]===undf)return e.preventDefault();if(e.keyCode==38)t.increment();if(e.keyCode==40)t.decrement();return true});if(!isNaN(parseInt(this.element.getAttribute("lces-digits"))))this.digits=parseInt(this.element.getAttribute("lces-digits"));else this.digits=5;if(!isNaN(parseInt(this.element.getAttribute("lces-decimal-points"))))this.decimalPoints=parseInt(this.element.getAttribute("lces-decimal-points"));else this.decimalPoints=5;if(this.element.getAttribute("lces-integers")&&(this.element.getAttribute("lces-integers").toLowerCase()==="true"||this.element.getAttribute("lces-integers").toLowerCase()==="false"))this.integer=this.element.getAttribute("lces-integers").toLowerCase()==="true";else this.integer=true;if(!isNaN(parseFloat(this.element.getAttribute("lces-max"))))this.max=parseFloat(this.element.getAttribute("lces-max"));else this.max=null;if(!isNaN(parseFloat(this.element.getAttribute("lces-min"))))this.min=parseFloat(this.element.getAttribute("lces-min"));else this.min=null;var n=jSh.d("arrow");n.classList.add("top");var s=jSh.d("arrow");s.classList.add("bottom");this.container.appendChild(n,s);n.appendChild(jSh.svg("numberfielduparrow",6.8,3.4,[jSh.path(undf,"m0 3.4 6.8 0L3.4 0z","fill: #fff;")]));s.appendChild(jSh.svg("numberfieldbottomarrow",6.8,3.4,[jSh.path(undf,"M0 0 6.8 0 3.4 3.4z","fill: #fff;")]));n.addEventListener("mousedown",function(e){this.classList.add("active");e.preventDefault();t.increment()});s.addEventListener("mousedown",function(e){this.classList.add("active");e.preventDefault();t.decrement()});function r(){this.classList.remove("active")}n.addEventListener("mouseup",r);s.addEventListener("mouseup",r)};jSh.inherit(lcNumberField,lcTextField);window.lcRadioButton=function(e){lcWidget.call(this,jSh.d("lcesradio"));var t=this;this.type="LCES RadioButton Widget";var i=jSh(".radiobuttonsvg")[0].cloneNode(true);this.appendChild(i);e.parentNode.insertBefore(this.element,e);e.style.display="none";this.setState("focused",false);lces.focus.addMember(this);this.setState("checked",false);this.value=e.value;this.addStateListener("checked",function(e){t.element[e?"setAttribute":"removeAttribute"]("checked","")});this.addStateListener("focused",function(e){if(e){t.checked=true;t.group.value=t.value}});this.addEventListener("mousedown",function(e){e.preventDefault()})};jSh.inherit(lcRadioButton,lcWidget);window.lcRadioButtons=function(e){lcGroup.call(this);var t=this;this.type="LCES RadioGroup Widget";this.setState("value","");this.radioButtons={};this.addStateListener("value",function(e){if(t.radioButtons[e])t.radioButtons[e].checked=true});if(jSh.type(e)!="array")e=jSh.toArr(e);this.setState("checked",false);this.setExclusiveState("checked",true,1);var i=LCESLoopLabels();function n(e){this.radio.checked=true;e.preventDefault()}for(var s=0,r=e.length;s<r;s++){var o=new lcRadioButton(e[s]);o.group=this;this.radioButtons[e[s].value]=o;this.addMember(o);if(e[s].checked)o.checked=true;e[s].component=o;if(e[s].id&&i[e[s].id]){i[e[s].id].radio=o;i[e[s].id].addEventListener("mousedown",n);i[e[s].id].component=o}}};jSh.inherit(lcRadioButtons,lcGroup);lces.ui.CheckBoxSVG=jSh.svgm(".checkboxsvg",14,13,[jSh.pathm(".checkboxcolor","M2.6 1 10.4 1C11.3 1 12 1.7 12 2.6l0 7.9C12 11.3 11.3 12 10.4 12L2.6 12C1.7 12 1 11.3 1 10.4L1 2.6C1 1.7 1.7 1 2.6 1z"),jSh.pathm(undf,"m2.6 2.3 7.7 0C10.6 2.3 10.8 2.4 10.8 2.6l0 7.7C10.8 10.6 10.6 10.8 10.4 10.8l-7.7 0C2.4 10.8 2.3 10.6 2.3 10.4l0-7.7C2.3 2.4 2.4 2.3 2.6 2.3z","fill: #fff;"),jSh.pathm(".checkboxcolor","M11.5 2.5 11 3.1 5.9 8.2 4.3 6.6 3.8 6.1 2.7 7.1 3.2 7.7 5.3 9.8 5.9 10.3 6.4 9.8 12.1 4.1 12.6 3.6 11.5 2.5z")]);window.lcCheckBox=function(e){var t=lces.template.isChild(arguments,this);if(t)return t;lcTextField.call(this,jSh.d("lcescheckbox"));var i=this;this.type="LCES CheckBox Widget";if(e){e.style.display="none";e.parentNode.insertBefore(this.element,e)}else e={checked:false};var n=lces.ui.CheckBoxSVG.conceive(true);this.appendChild(n);this.setState("checked",false);this.addStateListener("checked",function(e){if(e)i.element.setAttribute("checked","");else i.element.removeAttribute("checked")});this.setState("checked",e.checked);this.addEventListener("mousedown",function(e){i.checked=!i.checked;e.preventDefault()});this.removeAllStateListeners("focused");this.setState("label",null);this.addStateListener("label",function(e){if(e&&(e.tagName+"").toLowerCase()==="label"){function t(e){i.checked=!i.checked;i.focused=true;e.preventDefault()}e.addEventListener("mousedown",t);e.component=i}});if(e&&e.id){e.component=this;var s=LCESLoopLabels();if(s[e.id]){this.label=s[e.id]}}};jSh.inherit(lcCheckBox,lcTextField);window.lcDropDownOption=function(e,t){var i=this;lcWidget.call(this,jSh.d(".lcesoption"));this.type="LCES Option Widget";this.value=e;if(jSh.type(t)==="array")this.append(t);else this.append(this._determineType(t));this.setState("selected",false);this.addStateListener("selected",function(e){if(e){i.element.setAttribute("lces-selected","")}else{i.element.removeAttribute("lces-selected")}})};jSh.inherit(lcDropDownOption,lcWidget);window.lcDropDown=function(e){var t=this;lcTextField.call(this,jSh.d(".lcesdropdown",undf,[jSh.d(".lcesdropdown-arrow",undf,[jSh.svg(undf,10,5,[jSh.path(undf,"m0 0 10 0-5 5z","fill: #fff;")])])]));this.type="LCES DropDown Widget";this.options=[];this.setState("selectedOption",false);if(e)this.selectElement=e;this.selectedDisplay=new lcWidget(jSh.d("lcesselected"));this.optionsContainer=new lcWidget(jSh.d("lcesoptions"));this.appendChild(this.selectedDisplay);this.optionsContainer.parent=this;var i=0;var n=jSh.ph();this.updateDropdownSize=function(){i=0;n.substitute(this);document.body.appendChild(this.element);this.selectedDisplay.style={width:"auto"};var e=this.selectedDisplay.html;this.options.forEach(function(e){t.selectedDisplay.html=e[1];var n=parseInt(getComputedStyle(t.selectedDisplay.element)["width"]);if(n>i)i=n});this.selectedDisplay.style={width:i+3+"px"};this.selectedDisplay.html=e;n.replace(this)};this.setState("value",null);this.addStateListener("value",function(i){i=i+"";var n=null;t.options.forEach(function(e){if(e[0].substr(0,e[0].length-2)===i)n=e[2]});t.selectedOption=n;e.value=i});this.addStateListener("selectedOption",function(e){if(e===null){t.selectedDisplay.html="&nbsp;";return false}t.selectedDisplay.html=e.html;t.value=e.value;e.selected=true});this.addStateCondition("selectedOption",function(e,t){if(t)return false;if(this.get())this.get().selected=false;return true});this.addEventListener("mousedown",function(e){e.preventDefault()});this.addEventListener("click",function(e){var i=e.target||e.srcElement;if(i.parentNode==t.optionsContainer.element){t.selectedOption=i.component;t.menuvisible=false}else if(i==t.selectedDisplay.element||i==t.element){t.menuvisible=!t.menuvisible}});this.removeAllStateListeners("focused");this.addStateListener("focused",function(e){this.component.menuvisible=e});onTransitionEnd(t.optionsContainer,function(e){if(e.propertyName=="opacity"){var i=getComputedStyle(this)["opacity"];if(i==0)t.optionsContainer.style.display="none"}});function s(){r()}this.setState("menuvisible",false);this.addStateListener("menuvisible",function(e){if(e){r();window.addEventListener("scroll",s);t.optionsContainer.style.display="inline-block";t.classList.add("visible")}else{window.removeEventListener("scroll",s);t.classList.remove("visible")}});this.setState("flipped",false);this.addStateListener("flipped",function(e){t.classList[e?"add":"remove"]("flipped")});function r(){var e=t.optionsContainer.style.display;t.optionsContainer.style.display="inline-block";var i=t.optionsContainer.element.offsetHeight;var n=innerHeight-t.element.getBoundingClientRect().bottom;t.optionsContainer.style.display=e;if(i>n)t.flipped=true;else t.flipped=false}this.addOption=function(e,t){var i=new lcDropDownOption(e,t);this.options.push([e+"op",i.html,i]);i.parent=this.optionsContainer;this.updateDropdownSize();return i};this.removeOption=function(e){var i=typeof e==="number"?e:undf;var n=typeof e==="string"?e:undf;var s=i===undf&&n===undf?this._determineType(e):undf;var r=[];if(i!==undf){r.push([this.options[i],i])}else{this.options.forEach(function(e,t){if(n!==undf){if(n.toLowerCase()==e[0])r.push([e,t])}else{if(s&&s.component===e[2])r.push([e,t])}})}r.forEach(function(e){if(e[0]){t.options.splice(e[1],1);t.optionsContainer.remove(e[0][2]);if(t.selectedOption===e[0][2])t.selectedOption=t.options[0][2]}});this.updateDropdownSize()};if(e){if(e.parentNode)e.parentNode.insertBefore(this.element,this.selectElement);var o=null;var a=jSh(e).jSh("option");a.forEach(function(i,n){var s=t.addOption(i.value,jSh.toArr(i.childNodes));if(i.value==e.value||n===0)o=s});this.selectedOption=o;e.style.display="none"}var l=this.selectedOption;this.value=undefined;this.value=l.value};jSh.inherit(lcDropDown,lcTextField);window.lcTHead=function(){lcWidget.call(this,jSh.c("thead"))};window.lcTBody=function(){lcWidget.call(this,jSh.c("tbody"))};window.lcTHeading=function(e){lcWidget.call(this,e||jSh.c("th"))};window.lcTRow=function(e){lcWidget.call(this,e||jSh.c("tr"))};window.lcTCol=function(e){lcWidget.call(this,e||jSh.c("td"))};jSh.inherit(lcTHead,lcWidget);jSh.inherit(lcTBody,lcWidget);jSh.inherit(lcTHeading,lcWidget);jSh.inherit(lcTRow,lcWidget);jSh.inherit(lcTCol,lcWidget);window.lcTable=function(e){lcWidget.call(this,e||jSh.c("table","lces"));var t=this;this.thead=new lcTHead;this.tbody=new lcTBody;this.thead.parent=this;this.tbody.parent=this;this.rows=[];this.headings=[];this._addItem=function(e,t,i){var n=this._determineType(e);t.appendChild(n);i.push(e)};this.addRow=function(e,i){var n=new lcTRow;e.forEach(function(e){n.appendChild(new lcTCol(jSh.c("td",undf,undf,t._determineType(e))))});n.cols=n.children;if(!i)this._addItem(n,this.tbody,this.rows);this._checker();return n};this.insertBefore=undefined;this.insertBeforeRow=function(e,t){var i=this.addRow(e,true);if(typeof t==="number")var n=this.rows[t];else var n=this._determineType(t).component;if(!n)throw TypeError("Row "+t+" is invalid");if(this.rows.indexOf(n)===-1)throw ReferenceError("Row "+t+" isn't a descendant");this.tbody.element.insertBefore(i.element,n.element);this.rows.splice(this.rows.indexOf(t),0,i);this._checker();return i};this.removeRow=function(e){if(typeof e==="number"){var t=this.rows[e];if(!t)throw ReferenceError("Out of bounds index for row")}else{var t=this._determineType(e).component;if(!t)throw TypeError("Row "+t+" is invalid");if(this.rows.indexOf(t)===-1)throw ReferenceError("Row "+t+" isn't a descendant")}this.rows.splice(this.rows.indexOf(t),1);this.tbody.removeChild(t.element);this._checker()};this.setHeadings=function(e){this.headings.forEach(function(e){t.removeHeading(e)});var i=[];e.forEach(function(e){i.push(t.addHeading(e))});return i};this.addHeading=function(e){var t=new lcTHeading;t.appendChild(this._determineType(e));this._addItem(t,this.thead,this.headings);return t};this.removeHeading=function(e){if(typeof e==="number"){e=this.headings[e]}else{e=this._determineType(e).component}if(!e)return;var t=this.headings.indexOf(e);if(t!==-1)this.headings.splice(t,1);this.thead.removeChild(e.element)};this.removeAllHeadings=function(){this.headings=[];while(this.thead.getChild(0)){this.thead.removeChild(this.thead.getChild(0))}};this.removeAllRows=function(){this.rows=[];while(this.tbody.getChild(0)){this.tbody.removeChild(this.tbody.getChild(0))}};this.addStateListener("width",function(e){t.element.width=e});this.states["width"].get=function(){return t.element.width};this.addStateListener("height",function(e){t.element.height=e});this.states["height"].get=function(){return t.element.height};this._checker=function(){var e=0;this.tbody.children.forEach(function(t,i){if(t.skipChecker){e+=1;return}if((i-e)%2===0)t.removeAttribute("checker");else t.setAttribute("checker","")})}};jSh.inherit(lcTable,lcWidget);window.lcAccordionSection=function(e,t,i,n){lcWidget.call(this,jSh.d("lces-acc-section",undf,[jSh.d("lces-acc-title"),jSh.d("lces-acc-contents")]));var s=this;var r=this.element.getChild(0);var o=this.element.getChild(1);this.contents=o;this.contents.appendChild(jSh.d());r.appendChild(jSh.d("lces-acc-arrow",undf,jSh.svg(undf,15,15,[jSh.path(undf,"M3.8 1.9L3.8 7.5 3.8 13.1 7.5 10.3 11.3 7.5 7.5 4.7 3.8 1.9z")])));if(e){e=typeof e==="string"?jSh.t(e):e;r.appendChild(e)}else{r.appendChild(jSh.c("span",undf,ih("&nbsp;")))}if(t){t=typeof t==="string"?jSh.t(t):t;o.getChild(0).appendChild(t)}this.setState("open",false);this.addStateListener("open",function(e){if(e){s.classList.add("lces-acc-open");s.contents.style.height=(s.accordion.sectionHeight||s.height)+"px"}else{s.classList.remove("lces-acc-open");s.contents.style.height="0px"}});r.addEventListener("click",function(){if(s.open&&s.accordion.sectionsCloseable)s.open=false;else s.open=true;if(typeof i==="function")i()});if(n){var a=(n.getAttribute("open")+"").toLowerCase();this._initCallback=function(){if(a)this.open=true}}};window.lcAccordion=function(e){lcWidget.call(this,jSh.d("lces-accordion"));var t=this;this.sectionHeight=250;this.sectionsCloseable=false;this.sectionsGroup=new lcGroup;this.sectionsGroup.setState("open",true);this.sectionsGroup.setExclusiveState("open",true,1);var i=[];this.addSection=function(e,t,n,s){var r=new lcAccordionSection(e,t,n,s);if(typeof r._initCallback==="function")i.push(r._initCallback.bind(r));this.sectionsGroup.addMember(r);this.appendChild(r);r.accordion=this};this.removeSection=function(e){e=this.determineSection(e);if(!e)return null;this.sectionsGroup.removeMember(e);this.removeChild(e)};this.removeAllSections=function(){while(this.getSection(0))this.removeSection(0)};this.getSection=function(e){return this.sectionsGroup.members[e]};this.determineSection=function(e){if(e instanceof lcAccordionSection)return e;if(typeof e==="number")return t.sectionsGroup.members[e];if(e instanceof Node&&e.component instanceof lcAccordion)return e.component;
return null};t.setState("maxOpen",1);t.addStateListener("maxOpen",function(e){t.sectionsGroup.exclusiveMembers["open"].memberLimit=!isNaN(e)&&parseInt(e)>=1?parseInt(e):1});if(e){if(e.parentNode)e.parentNode.insertBefore(this.element,e);if(!isNaN(e.getAttribute("section-height"))&&parseInt(e.getAttribute("section-height"))>50)this.sectionHeight=parseInt(e.getAttribute("section-height"));if(!isNaN(e.getAttribute("max-open"))&&parseInt(e.getAttribute("max-open"))>=1)this.maxOpen=parseInt(e.getAttribute("max-open"));if(e.getAttribute("closeable")!==null)this.sectionsCloseable=true;var n=e.jSh("lces-section");n.forEach(function(e){var i=e.jSh("lces-title")[0];if(i)e.removeChild(i);t.addSection(i&&i.childNodes[0]?jSh.toArr(i.childNodes):null,jSh.toArr(e.childNodes),null,e)});e.parentNode.removeChild(e)}i.forEach(function(e){e()})};jSh.inherit(lcAccordion,lcWidget);jSh.inherit(lcAccordionSection,lcWidget);jSh.extendObj(lces.types,{dropdown:lcDropDown,checkbox:lcCheckBox,textfield:lcTextField,textarea:lcTextArea,slider:lcSlider,numberfield:lcNumberField,fileinput:lcFileInput,accordion:lcAccordion})};function lcOnEffectFade(e){}function lcEffectFade(){var e=this;if(!this.element){console.warn("Component has no element.");return false}}lces.rc[8]=function(){lces.ui.Windows=[];window.lcWindow=function(e,t){lcWidget.call(this,e?e.getElementsByClassName("lces-window-contents")[0]:jSh.d("lces-window-contents"));var i=this;this.windowID=lces.ui.Windows.length;lces.ui.Windows.push(this);this.buttons=[];this.borderOffset=20;if(!jSh("#windowcontainer"))document.body.appendChild(jSh.d("#windowcontainer.lces-themify"));if(!e){this.container=jSh.d("lces-window",undf,jSh.d(undf,undf,jSh.d(undf,undf,[jSh.d("lces-window-title",t||"Window "+this.windowID),this.element,jSh.d("lces-window-buttonpanel")])));jSh("#windowcontainer").appendChild(this.container)}else{e=jSh(e);var n=e.getAttribute("class");var s=e.getAttribute("id");var r=e.jSh("lces-title")[0];var o=e.jSh("lces-contents")[0];var a=e.jSh("lces-buttons")[0];if(o){jSh.toArr(o.childNodes).forEach(function(e){i.element.appendChild(e)})}if(a){this.buttons=a.jSh("button")}this.container=jSh.d("lces-window",undf,jSh.d(undf,undf,jSh.d(undf,undf,[jSh.d("lces-window-title",(r?" ":null)||t||"Window "+this.windowID,r?jSh.toArr(r.childNodes):undf),this.element,jSh.d("lces-window-buttonpanel",undf,a?jSh.toArr(a.childNodes):undf)])));jSh("#windowcontainer").appendChild(this.container);e.parentNode.removeChild(e);if(n){n=n.split(" ");n.forEach(function(e){i.container.classList.add(e)})}if(s)this.container.id=s}this.classList.add("lces-window-contents");this._title=this.container.getElementsByClassName("lces-window-title")[0];this._buttonpanel=this.container.getElementsByClassName("lces-window-buttonpanel")[0];this.setState("title",t||"Window "+this.windowID);this.addStateListener("title",function(e){i._title.innerHTML=e});this.setState("titleVisible",true);this.addStateListener("titleVisible",function(e){i._title.style.display=e?"block":"none";if(e)i.container.classList.add("lces-window-titlevisible");else i.container.classList.remove("lces-window-titlevisible")});this.setState("buttonPanelVisible",true);this.addStateListener("buttonPanelVisible",function(e){i._buttonpanel.style.display=e?"block":"none";if(e)i.container.classList.add("lces-window-buttonsvisible");else i.container.classList.remove("lces-window-buttonsvisible")});this.container.classList.add("lces-window-titlevisible");this.container.classList.add("lces-window-buttonsvisible");this.addButton=function(e,t){var i=new lcWidget(jSh.c("button",undf,e));if(typeof t==="function"){i.addEventListener("click",t)}this.buttons.push(i);this._buttonpanel.appendChild(i.element);return i};this.removeButton=function(e){if(this.buttons.indexOf(e)===-1)return false;this.buttons.splice(this.buttons.indexOf(e),1);this._buttonpanel.removeChild(e.element)};lcDraggable.call(this,this.container.getChild(0).getChild(0).getChild(0),this.container);onTransitionEnd(this.container,function(e){if(e.propertyName=="opacity"&&getComputedStyle(this)["opacity"]==0)i.container.setAttribute("window-invisible","")});this.setState("visible",false);this.addStateListener("visible",function(e){if(e){i.container.removeAttribute("window-invisible");i.container.setAttribute("visible","")}else i.container.removeAttribute("visible")});this.container.component=this;this.visible=true;this.onWinResize=function(){i.update()};this.update=function(){if(this.centered)this._center()};this._center=function(){this.container.style.left=(innerWidth-this.container.offsetWidth)/2+"px";var e=(innerHeight-this.container.offsetHeight)/2;e=e<this.borderOffset?this.borderOffset:e;this.container.style.top=e+"px"};this.setState("centered",false);this.addStateListener("centered",function(e){if(e){i.update();window.addEventListener("resize",i.onWinResize)}else window.removeEventListener("resize",i.onWinResize)});this.setState("width",1);this.addStateListener("width",function(e){e=!e?e:parseInt(e);if(!e||isNaN(e)||e<0){i.style.width="auto";this.stateStatus="auto"}else{i.style.width=e+"px";this.stateStatus=e}});this.setState("height",1);this.addStateListener("height",function(e){e=!e?e:parseInt(e);if(!e||isNaN(e)||e<0){i.style={height:"auto",overflow:"initial"};this.stateStatus="auto"}else{i.style.height=e+"px";i.style.overflow="auto";this.stateStatus=e}});this.width=null;this.height=null;if(e){var l=((e.getAttribute("lces-visible")||e.getAttribute("visible"))+"").toLowerCase();var c=(e.getAttribute("title-visible")+"").toLowerCase();var d=(e.getAttribute("buttonpanel-visible")+"").toLowerCase();var h=e.getAttribute("centered");var u=e.getAttribute("draggable");var f=e.getAttribute("width");var p=e.getAttribute("height");if(l&&(l=="false"||l=="true")){this.visible=l=="true";if(this.visible)i.container.setAttribute("visible","");else this.container.setAttribute("window-invisible","")}else{this.visible=false;this.container.setAttribute("window-invisible","")}if(u!==null){this.draggable=true}if(f!==null){this.width=e.getAttribute("width")}if(p!==null){this.height=e.getAttribute("height")}if(c==="false"){this.titleVisible=false}if(d==="false"){this.buttonPanelVisible=false}if(h!==null){this.centered=true}}else{this.visible=false;this.container.setAttribute("window-invisible","")}};jSh.inherit(lcWindow,lcWidget);window.lcNotification=function(e,t,i,n,s){lcWindow.call(this);var r=this;this.dynTextTrigger="text";lcDynamicText.call(this);this.on("dynpropchange",function(){if(r._updateNotifiHeight)r._updateNotifiHeight()});this.container.classList.add("lces-notification");this.buttonPanelVisible=false;this.titleVisible=false;this.style={padding:"10px 15px",color:"#545454",textAlign:"left",fontSize:"14px"};function o(e){if(jSh.type(e)==="string"){this.setState("message",jSh.d(undf,e))}else if(e instanceof Node){this.setState("message",e)}else if(jSh.type(e)==="array"){var t=jSh.d();e.forEach(function(e){t.appendChild(e)});this.setState("message",t)}else{this.setState("message",jSh.d(undf,e?e.toString():e))}}var o=o.bind(this);o(e);this.appendChild(this.message);if(jSh.type(e)==="string"){this.text=e}if(jSh.type(t)==="object"){i=(typeof t.align==="string"?t.align:"BL").toUpperCase();h=typeof t.onClick==="function"?t.onClick:null;t=typeof t.delay==="number"||t.delay===null?t.delay:1e3}this.delay=t;var a=/(?:^|[^])+([TBM])(?:[^]|$)+/i;this.ypos=!a.test(i)?"B":i.replace(a,"$1");var l=/(?:^|[^])+([LRC])(?:[^]|$)+/i;this.xpos=!l.test(i)?"L":i.replace(l,"$1");this.relAnchor=n;this.relativeAlignment=null;this.relOffsetFactor=null;this.relAlignFixed=null;var c=/^R[TRBL](\d+(?:\.\d+)?)?$/i;var d=/^R([TRBL])(?:\d+(?:\.\d+)?)?$/i;var h;if(c.test(i)){if(this.relAnchor instanceof Node){this.relativeAlignment=i.replace(d,"$1")?i.replace(d,"$1"):"B";this.relOffsetFactor=!i.replace(c,"$1")||isNaN(i.replace(c,"$1"))?.5:parseFloat(i.replace(c,"$1"));this.xpos="R";this.ypos="R";this.relAlignFixed=this.checkRelFixed(this.relAnchor);this.container.style.position=this.relAlignFixed?"fixed":"absolute";this.notifiWidth=this.container.offsetWidth;this.notifiHeight=this.container.offsetHeight}h=s}else{h=n}if(h){this.addEventListener("click",function(){if(h&&typeof h==="function")h()});this.container.style.cursor="pointer"}onTransitionEnd(this.container,function(e){if(e.propertyName==="opacity"&&getComputedStyle(this)["opacity"]==0)this.parentNode.removeChild(this)});this.removeState("visible");this.setState("visible");this._visibleTimeout=null;this._visibleAnim=null;this.addStateListener("visible",function(e){if(e){r.container.removeAttribute("window-invisible");clearTimeout(r._visibleTimeout);lces.ui.notifications.alignments[r.ypos][r.xpos].add(r);if(r.relativeAlignment){r.updateRelPosition()}r._visibleAnim=setTimeout(function(){r.container.setAttribute("visible","");r.container.getChild(0).style.height=r.renderedHeight},0);if(r.delay){r._visibleTimeout=setTimeout(function(){r.visible=false},r.delay)}}else{r.container.removeAttribute("visible");clearTimeout(r._visibleTimeout);clearTimeout(r._visibleAnim);if(getComputedStyle(r.container)["opacity"]==0&&r.container.parentNode)r.container.parentNode.removeChild(r.container);r.container.getChild(0).style.height=r.renderedHeight;r.container.getChild(0).style.height="1px"}});this.toggle=function(){this.visible=!this.visible};lces.ui.notifications.addMember(this);this._ph=jSh.ph().component;this._updateNotifiHeight=function(){if(this.container.parentNode)this._ph.substitute(this.container);document.body.appendChild(this.container);var e=getComputedStyle(this.container);this.container.style.display="block";this.container.getChild(0).style.height="auto";this.renderedHeight=getComputedStyle(this.container.getChild(0))["height"];document.body.removeChild(this.container);if(this._ph.substituting)this._ph.replace(this.container)};this._updateNotifiHeight();if(this.container.parentNode)this.container.parentNode.removeChild(this.container);this.visible=false};jSh.inherit(lcNotification,lcWindow);jSh.extendObj(lcNotification.prototype,{relativeOffset:20,relAlignments:{T:function(e,t,i,n,s){return[e*(n-t),-(i+this.relativeOffset)]},B:function(e,t,i,n,s){return[e*(n-t),s+this.relativeOffset]},R:function(e,t,i,n,s){return[n+this.relativeOffset,e*(s-i)]},L:function(e,t,i,n,s){return[-(t+this.relativeOffset),e*(s-i)]}},checkRelFixed:function(e){var t=false;var i=e;while(i!==document.body){if(getComputedStyle(i)["position"].toLowerCase()==="fixed")t=true;i=i.parentNode}return t},updateRelPosition:function(){var e=this.relAnchor.getBoundingClientRect();var t=e.right-e.left;var i=e.bottom-e.top;var n=this.notifiWidth;var s=this.notifiHeight;var r=e.left+(!this.relAlignFixed?scrollX:0);var o=e.top+(!this.relAlignFixed?scrollY:0);var a=this.relAlignments[this.relativeAlignment].call(this,this.relOffsetFactor,n,s,t,i);this.container.style.left=r+a[0]+"px";this.container.style.top=o+a[1]+"px"}});window.lcNotifications=function(){lcGroup.call(this);var e=this;var t=function(e){this.appendChild(e.container)};var i=function(e){if(this.getChild(0)&&this.getChild(0)!==e.container)this.insertBefore(e.container,this.getChild(0));else this.appendChild(e.container)};this.alignments={T:{L:jSh.d({"class":"notification-alignment notifi-left notifi-top lces-themify",properties:{add:t}}),C:jSh.d({"class":"notification-alignment notifi-center notifi-top lces-themify",properties:{add:t}}),R:jSh.d({"class":"notification-alignment notifi-right notifi-top lces-themify",properties:{add:t}})},M:{L:jSh.d({"class":"notification-alignment notifi-left notifi-middle lces-themify",properties:{add:i}}),C:jSh.d({"class":"notification-alignment notifi-center notifi-middle lces-themify",properties:{add:i}}),R:jSh.d({"class":"notification-alignment notifi-right notifi-middle lces-themify",properties:{add:i}})},B:{L:jSh.d({"class":"notification-alignment notifi-left notifi-bottom lces-themify",properties:{add:i}}),C:jSh.d({"class":"notification-alignment notifi-center notifi-bottom lces-themify",properties:{add:i}}),R:jSh.d({"class":"notification-alignment notifi-right notifi-bottom lces-themify",properties:{add:i}})},R:jSh.d({"class":"notification-alignment notifi-relative lces-themify",properties:{add:t}})};var n=document.body;[this.alignments["T"],this.alignments["B"],this.alignments["M"]].forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){if(e[t])n.appendChild(e[t])})});n.appendChild(this.alignments["R"]);this.alignments["R"]["R"]=this.alignments["R"];this.addStateListener("newmember",function(e){if(!(e instanceof lcNotification))throw TypeError("Notification provided does not implement interface lcNotification")})};jSh.inherit(lcNotifications,lcGroup);jSh.extendObj(lces.types,{window:lcWindow,notification:lcNotification});lces.ui.initNotifications=function(){lces.ui.notifications=new lcNotifications};lces.addInit(lces.ui.initNotifications)};lces.rc[9]=function(){lces.ui.tagEditor={};window.lcGenreGroup=function(e){lcGroup.call(this);var t=this;this.element=e;this.addStateListener("parent",function(t){if(t instanceof Node&&t.nodeType===Node.ELEMENT_NODE)t.appendChild(e)});this.genreEdit=null;this.genreList=null;this.genreArray=null;this.setState("string","");this.states["string"].get=function(){var e=t.genreEdit.element.getChild(0);var i=jSh.toArr(e.childNodes).map(function(e){if(e.nodeType!==Node.ELEMENT_NODE||!e.component)return"";return e.component.value}).filter(function(e){return e!=""});var n=i.join(", ");return i.length?n:""};this.addStateListener("string",function(e){var i=t.genreList.element.getChild(-1);var n=t.genreEdit.element.getChild(0);t.genreArray.forEach(function(e){i.appendChild(e);e.component.genreToggled=false});if(!e||e.trim()===""){t.genreEdit.noGenres=true;return}var s=e.toLowerCase().split(/\s*,\s*/g);if(s.length>=1&&t.genreEdit.noGenres){n.innerHTML="";t.genreEdit.noGenres=false}var r=0;s.forEach(function(e){if(t.genreArray[e+"genre"]){n.appendChild(t.genreArray[e+"genre"]);t.genreArray[e+"genre"].component.genreToggled=true;r+=1}});if(!r)t.genreEdit.noGenres=true});this.onchange=function(){};this._onchange=function(e){if(e)return false;if(typeof this.onchange==="function")this.onchange()}};jSh.inherit(lcGenreGroup,lcGroup);window.lcGenreField=function(e){if(!lces.ui.tagEditor.closeSVG){lces.ui.tagEditor.closeSVG=jSh.svg(".genreremovesvg",8,8,[jSh.path(".genreremovecolor","M1.7 0 0 1.7 2.3 4 0 6.3 1.7 8 4 5.7 6.3 8 8 6.3 5.7 4 8 1.7 6.3 0 4 2.3 1.7 0z")])}e=e||jSh.d("genres-edit",undf,[jSh.c("span",{"class":"black",attr:{"no-select":""}}),jSh.d({"class":"genre-item",attr:{"new-genre":""},child:[jSh.c("span",undf,ih("&nbsp;+ Add Genre&nbsp;")),jSh.c("span",undf,ih("&nbsp;+ Add Genre&nbsp;")),jSh.d("",undf,lces.ui.tagEditor.closeSVG.cloneNode(true)),jSh.c("section")]}),jSh.d("genre-list",undf,[jSh.c("input",{"class":"genre-search",prop:{type:"text",placeholder:"Search Genres"}}),jSh.d("genre-dropcatcher",undf,[jSh.c("span",undf,"REMOVE GENRE"),jSh.d()]),jSh.d({"class":"genre-select",attr:{"no-select":""}})])]);var t=[];var i=new lcGenreGroup(e);i.genreArray=t;var n=new lcWidget(e);i.genreEdit=n;var s=new lcWidget(n.element.getChild(-1));i.genreList=s;var r=new lcTextField(e.jSh(".genre-search")[0]);n.setState("editing",false);n.addStateListener("editing",function(e){if(e){s.visible=true}else{s.visible=false}});i.hardLinkStates("value","string");onTransitionEnd(s.element,function(e){if(e.propertyName=="opacity"&&getComputedStyle(this)["opacity"]==0)this.style.display="none"});s.addStateListener("visible",function(e){if(e){s.style.display="block";setTimeout(function(){s.style.opacity=1},0)}else s.style.opacity=0});var o=null;function a(e){this.style.opacity="0.5";o=this;e.dataTransfer.effectAllowed="move";e.dataTransfer.setData("text/html","<span>genredroppinglikeaboss</span>");setTimeout(function(){n.element.setAttribute("dragging","")},100)}function l(e){if(e.preventDefault){e.preventDefault()}e.dataTransfer.dropEffect="move";return false}function c(e){if(o!==this.genre&&!this.genre.component&&this!==m){this.genre.setAttribute("dragover","")}else if(o!==this.genre){if(this===m&&o.component.genreToggled)return this.genre.setAttribute("dragover","")?true:true;if(this!==m){if(this.genre.component.genreToggled)return this.genre.setAttribute("dragover","")?true:true}}}function d(e){this.genre.removeAttribute("dragover")}function h(e){if(e.stopPropagation){e.stopPropagation()}if(o!==this.genre&&e.dataTransfer.getData("text/html")=="<span>genredroppinglikeaboss</span>"){function t(){if(this!==m){if(this===p)f.appendChild(o);else f.insertBefore(o,this.genre);o.component.genreToggled=true}else{s.element.getChild(-1).appendChild(o);o.component.genreToggled=false}}if(o!==this.genre){if(this===m&&o.component.genreToggled)return t.call(this)+s.sort()+r.element.focus()?true:true;if(this!==m){if(this===p||this.genre.component.genreToggled){t.call(this);if(!lces.ui.mobile)r.element.focus();return true}}}}return false}function u(e){t.forEach(function(e){e.removeAttribute("dragover","")});p.genre.removeAttribute("dragover","");this.removeAttribute("style");setTimeout(function(){n.element.removeAttribute("dragging")},100)}var f=n.element.getChild(0);var p=n.element.getChild(1).getChild(-1);p.genre=p.parentNode;var m=s.element.getChild(1);m.genre=m;[m,p].forEach(function(e){e.addEventListener("dragenter",c,false);e.addEventListener("dragover",l,false);e.addEventListener("dragleave",d,false);e.addEventListener("dragdrop",h,false);e.addEventListener("drop",h,false)});var g=AUCE.data.genres;var v=lces.ui.tagEditor.closeSVG;i.addGenre=function(e,i){var o=new lcWidget(jSh.d("genre-item",undf,[jSh.c("span",undf,e),jSh.d(undf,undf,v.cloneNode(true)),jSh.c("aside",undf,","),jSh.c("section")],undf,{draggable:true}));var f=((i!==undf?i:e)+"").toLowerCase();t.push(o.element);t[f+"genre"]=o.element;o.string=e;o.value=f;o.element.string=o.string;o.element.value=f;o.setState("genreToggled",false);o.parent=s.element.getChild(-1);o.addEventListener("dragstart",a,false);o.addEventListener("dragend",u,false);o.element.addEventListener("click",function(e){var t=e.target||e.srcElement;if(t===o.element.getChild(1)||jSh.isDescendant(t,o.element.getChild(1))){s.element.getChild(-1).appendChild(this);this.component.genreToggled=false;s.sort()}else if(!o.genreToggled){n.element.getChild(0).appendChild(this);o.genreToggled=true}if(!lces.ui.mobile)r.element.focus()});var p=o.element.getChild(-1);p.genre=o.element;p.addEventListener("dragenter",c,false);p.addEventListener("dragover",l,false);p.addEventListener("dragleave",d,false);p.addEventListener("dragdrop",h,false);p.addEventListener("drop",h,false);o.genreToggled=false};i.removeGenre=function(e){var i=b(e);if(!i)return false;t.splice(t.indexOf(i),1);t[i.string.toLowerCase()+"genre"]=undf;i.component.parent.removeChild(i)};function b(e){if(!e)return null;if(jSh.type(e)==="string"){return t[e.toLowerCase()+"genre"]}else if(e.states&&e.states["genreToggled"]){return e.element}else if(e.component&&e.component.states["genreToggled"]){return e}else{return null}}s.sort=function(){var e=[];var t=this.element.getChild(-1);jSh.toArr(t.childNodes).forEach(function(i){if(i.nodeType===Node.ELEMENT_NODE){e[i.component.string]=i;e.push(i.component.string);t.removeChild(i)}});e.sort(function(e,t){return e<t?-1:1});e.forEach(function(i){t.appendChild(e[i])})};s.sort();var S=[];var y=[];var w=[];function x(e){return e.replace(/(\\|\[|\]|\||\{|\}|\(|\)|\^|\$|\:|\.|\?|\+|\*|\-|\!|\=)/g,"\\$1")}function j(e){var t=s.element.getChild(-1);var i=jSh.toArr(t.childNodes).filter(function(e){return e.nodeType===Node.ELEMENT_NODE});w=i.map(function(e){e.passedSearch=false;e.style.display="none";t.removeChild(e);return e});w.forEach(function(e){w[e.string]=e});S=[];y=[];var n=new RegExp("^"+x(e),"i");var r=new RegExp(x(e),"ig");i.forEach(function(t){if(e.trim()==="")return t.removeAttribute("style");if(n.test(t.string)){t.passedSearch=true;return S.push(t.string)}if(r.test(t.string)){t.passedSearch=true;return y.push(t.string)}});if(e.trim()===""){i.forEach(function(e){if(!e.passedSearch)t.appendChild(e)});return s.sort()}S.sort(function(e,t){return e<t?-1:1});y.sort(function(e,t){return e<t?-1:1});S.forEach(function(e){e=w[e];t.appendChild(e);e.removeAttribute("style")});y.forEach(function(e){e=w[e];t.appendChild(e);e.removeAttribute("style")});i.forEach(function(e){if(!e.passedSearch)t.appendChild(e)})}r.classList.remove("lces");r.addEventListener("keyup",function(e){var t=S[0]||y[0];if(this.value.trim()!==""&&e.keyCode===13&&t){f.appendChild(w[t]);w[t].component.genreToggled=true;this.value="";j(this.value)}else j(this.value)});var C=p.parentNode.getChild(0);var E=C.innerHTML;C.innerHTML="";onTransitionEnd(p.parentNode,function(e){if(e.propertyName==="opacity"&&getComputedStyle(this)["opacity"]==0){C.innerHTML=""}});n.addStateListener("noGenres",function(e){if(e){n.element.setAttribute("no-genres","");f.innerHTML='<div class="genre-item dummy" ><span><i>(No Genres)</i></span></div>&nbsp;&nbsp;&nbsp;';if(getComputedStyle(p.parentNode)["opacity"]==0)f.getChild(0).removeAttribute("style")}else{n.element.removeAttribute("no-genres")}});n.addStateListener("editing",function(e){if(e){if(n.noGenres)f.innerHTML="";n.noGenres=false;L.element.removeAttribute("visible");C.innerHTML=E;s.style.display="block";setTimeout(function(){n.classList.add("editing")},0);if(!lces.ui.mobile)r.element.focus()}else{n.classList.remove("editing");r.element.blur();if(!f.getChild(0)){var t=i.string===i.states["string"].stateStatus;n.noGenres=true;i.string="";i._onchange(t)}else{var t=i.string===i.states["string"].stateStatus;n.noGenres=false;i.string=i.string;i._onchange(t)}}});r.element.component=n;lces.focus.addMember(n);n.addStateListener("focused",function(e){n.editing=e});onTransitionEnd(s.element,function(e){if(e.propertyName=="opacity"&&getComputedStyle(this)["opacity"]==0){this.style.display="none"}});var L=jSh(".editpropertysvg")[0]?new lcWidget(jSh.d("editpropertyicon",undf,jSh(".editpropertysvg")[0].cloneNode(true))):new lcWidget;n.element.insertBefore(L.element,s.element);L.style={position:"relative",left:"-5px"};n.addEventListener("mouseover",function(e){if(!n.editing)L.element.setAttribute("visible","")});n.addEventListener("mouseout",function(e){L.element.removeAttribute("visible")});if(!f.getChild(0))n.noGenres=true;return i}};lces.rc[3]=function(){window.ih=function(e){return{s:e,t:1}};window.prefixEvent=function(e,t,i){if(jSh.type(e)!="array")e=[e];var n=["o","webkit",""];for(var s=0;s<e.length;s++){for(var r=0;r<n.length;r++){t.addEventListener(n[r]+e[s],i)}}};window.onTransitionEnd=function(e,t){if(!(e instanceof Node))e=e.element;prefixEvent(["TransitionEnd","transitionend"],e,t)};window.lcFocus=function(){var e=this;this.type="LCES Focus Manager";this.recurring=false;this.setState("focused",false);this.setExclusiveState("focused",true,1);this._addMember=this.addMember;this.addMember=function(e){e.setState("focused",false);this._addMember(e);e.states["focused"].flippedStateCall=true};this.focusedComponent=null;var t=new lcWidget(document.body);t.setState("focused",false);this.addMember(t);function i(i){var n=i.target||i.srcElement;var s=n;if(s){while(s!==t.element){if(s){if(s.component&&s.component.isLCESComponent&&s.component.focused!==undefined){s.component.focused=true;e.focusedComponent=s.component;break}}else{s=t.element;break}s=s.parentNode}}else{s=t.element}if(s===t.element){t.focused=true;e.focusedComponent=t}}this.setState("enabled",false);this.addStateListener("enabled",function(e){if(e)window.addEventListener("click",i);else window.removeEventListener("click",i)})};jSh.inherit(lcFocus,lcGroup);window.LCESLoopLabels=function(){var e=jSh("label");var t=jSh.toArr(e).filter(function(e){return!!e.htmlFor});t.forEach(function(e,t,i){i[e.htmlFor]=e});return t};window.lcWidget=function(e){var t=lcComponent.call(this);if(!t)this.type="LCES Widget";var i=this;this.jSh=jSh;this._determineType=this._determineType;if(!this.element)this.element=e?e:jSh.d();this.element.component=this;this.addEventListener=this.element.addEventListener.bind(this.element);this.setState("style",{});this.addStateListener("style",function(e){for(style in e){if(e.hasOwnProperty(style)){i.element.style[style]=e[style]}}});this.states["style"].get=function(){return i.element.style};this.setState("id",undf);this.addStateListener("id",function(e){i.element.id=e});this.states["id"].get=function(){return i.element.id};this.setState("text","");this.addStateListener("text",function(e){if(i.element.tagName.toLowerCase()!=="input"){i.element.textContent=e}else i.element.value=e});this.states["text"].get=function(){return i.element.value||i.element.textContent};this.setState("html","");this.addStateListener("html",function(e){if(i.element.innerHTML!==undf)i.element.innerHTML=e});this.states["html"].get=function(){return i.element.innerHTML};this.setState("parent",null);this.addStateListener("parent",function(e){if(e){if(e.isLCESComponent)e=e.element;e.appendChild(i.element)}else if(i.parent)i.parent.removeChild(i.element)});this.states["parent"].get=function(){return i.element.parentNode||this.stateStatus};this.setState("children",jSh.toArr(this.element.childNodes));this.addStateListener("children",function(e){if(jSh.type(e)==="array"){e.forEach(function(e){i.appendChild(e)});return true}i.appendChild(e)});this.states["children"].get=function(){return jSh.toArr(i.element.childNodes)};this.appendChild=function(e){if(jSh.hasMultipleArgs(arguments,this))return;if(e.isLCESComponent)e=e.element;this.element.appendChild(e)};this.append=this.appendChild;this.removeChild=function(e){if(jSh.hasMultipleArgs(arguments,this))return;var t=this._determineType(e);this.element.removeChild(t)};this.remove=this.removeChild;this.insertBefore=function(e,t){var i=this._determineType(e);var n=this._determineType(t);this.element.insertBefore(i,n)};this.setAttr=function(e,t){this.element.setAttribute(e,t===undf?"null":t)};this.getAttr=function(e){return this.element.getAttribute(e)};this.removeAttr=function(e){if(jSh.hasMultipleArgs(arguments,this))return;this.element.removeAttribute(e)};var n={add:function(e){i.element.classList.add(e)},remove:function(e){i.element.classList.remove(e)},contains:function(e){i.element.classList.contains(e)},removeAll:function(e){i.classList.forEach(function(t){return e===undf?i.classList.remove(t):t.indexOf(e)!=-1?i.classList.remove(t):false})},toggle:function(e){i.element.classList.toggle(e)}};Object.defineProperty(this,"classList",{configurable:true,get:function(){var e=jSh.toArr(i.element.classList);e.add=n.add;e.remove=n.remove;e.contains=n.contains;e.removeAll=n.removeAll;e.toggle=n.toggle;return e}});this.wrap=function(e){if(!e)return;var t=jSh.toArr(arguments);var n=this._determineType(t[0]);if(n.parentNode)n.parentNode.insertBefore(this.element,n);t.forEach(function(e){var t=i._determineType(e);i.appendChild(e)})};if(e){var s=this.getAttr("lces-dyntext")!==null;if(s){lcDynamicText.call(this);this.dynText.allowTags=false;this.dynText.element=null;function r(e){var t=jSh.toArr(e.attributes);t.forEach(function(t){i.dynText.compile(t.value+"",function(i){e.setAttribute(t.name,i)})})}r(this.element);function o(e,t){e.forEach(function(e){if(e.nodeType===Node.ELEMENT_NODE){r(e);o(jSh.toArr(e.childNodes),e)}else{if(e.nodeValue.trim()==="")return;var n=t.childNodes.length===1?t:jSh.c("span");n.innerHTML=jSh.filterHTML(e.nodeValue);i.dynText.compile(e.nodeValue+"",function(e){n.innerHTML=jSh.filterHTML(e)});if(n!==t){e.parentNode.insertBefore(n,e);e.parentNode.removeChild(e)}}})}o(this.children,this.element)}}};jSh.inherit(lcWidget,lcComponent);jSh.extendObj(lcWidget.prototype,{_determineType:function(e){if(!e)e=jSh.t(e);else if(e.isLCESComponent&&e.element)e=e.element;else if(e instanceof Node)e=e;else e=jSh.t(e);return e}});lces.initTagExamine=function(e){var t="";if(e.getAttribute("lces-widget")!==null)t=e.getAttribute("lces-widget");else if(e.tagName.toLowerCase==="lces-widget")doSomething()};lces.initTagLoad=function(){var e=jSh("[lces-widget]");var t=jSh("lces-widget");e=e.concat(t);for(var i=0,n=e.length;i<n;i++){var s=e[i];var r="";if(s.tagName.toLowerCase()!=="lces-widget"){var o=s.getAttribute("lces-widget");var a=s.getAttribute("lces-name")}else{var o=s.getAttribute("type");var a=s.getAttribute("name")}var l=s.tagName.toLowerCase();if(o){r=lces.types[o]?o:"widget"}else if(l==="input"||l==="textarea"){var c=s.type;if(l==="textarea")r="textarea";else if(c==="text"||c==="password")r="textfield";else if(c==="checkbox")r="checkbox";else if(c==="file")r="fileinput"}else if(l==="select"){r="dropdown"}else{r="widget"}var d=new lces.types[r](jSh(s));if(a)d.LCESName=a}};lces.focus=new lcGroup;jSh.extendObj(lces.focus,{init:function(){lcFocus.call(lces.focus);lces.focus.enabled=true}});lces.addInit(lces.initTagLoad);lces.addInit(lces.focus.init);lces.ui=new lcComponent;jSh.extendObj(lces.types,{widget:lcWidget})};lces.rc[4]=function(){window.lcDraggable=function(e,t){var i=this;this._drag={};this.onDrag=function(e){e.preventDefault();if(i.centered)return false;i._drag.mouseX=e.clientX;i._drag.mouseY=e.clientY;i._drag.winX=t.offsetLeft;i._drag.winY=t.offsetTop;window.addEventListener("mousemove",i.onDragging);window.addEventListener("mouseup",function(){window.removeEventListener("mousemove",i.onDragging);window.removeEventListener("mouseup",arguments.callee)})};this.onDragging=function(e){e.preventDefault();var n=i._drag.winX+(e.clientX-i._drag.mouseX);if(n>innerWidth-t.offsetWidth-i.borderOffset)n=innerWidth-t.offsetWidth-i.borderOffset;else if(n<i.borderOffset)n=i.borderOffset;var s=i._drag.winY+(e.clientY-i._drag.mouseY);if(s<i.borderOffset)s=i.borderOffset;else if(innerHeight>t.offsetHeight+i.borderOffset*4&&s>innerHeight-t.offsetHeight-i.borderOffset)s=innerHeight-t.offsetHeight-i.borderOffset;t.style.left=n+"px";t.style.top=s+"px"};this.setState("draggable",false);this.addStateListener("draggable",function(t){if(t)e.addEventListener("mousedown",i.onDrag);else e.removeEventListener("mousedown",i.onDrag)});this.borderOffset=20};window.lcControl=function(e){lcWidget.call(this,e||jSh.d("lcescontrol"));var t=this;this.element.component=this;this.classList.add("lcescontrol");this.inputs=jSh.toArr(this.element.getElementsByTagName("input")).concat(jSh.toArr(this.element.getElementsByTagName("button")));this.onMousedown=function(e){e.preventDefault()};this.onFocus=function(e){e.preventDefault();if(this.blur)this.blur()};this.clickCatcher=jSh.d("lcescontrolclick");this.clickCatcher.addEventListener("mousedown",this.onMousedown);this.appendChild(this.clickCatcher);this._appendChild=this.appendChild;this.appendChild=function(){this._appendChild.apply(this,jSh.toArr(arguments));this._appendChild(this.clickCatcher)};this.setState("disabled",false);this.addStateListener("disabled",function(e){if(e){t.element.setAttribute("disabled","");t.element.addEventListener("mousedown",t.onMousedown);t.clickCatcher.style.display="block";t.inputs.forEach(function(e){e.addEventListener("focus",t.onFocus)})}else{t.element.removeAttribute("disabled");t.element.removeEventListener("mousedown",t.onMousedown);t.clickCatcher.style.display="none";t.inputs.forEach(function(e){e.removeEventListener("focus",t.onFocus)})}});this.setState("focused",false);lces.focus.addMember(this);var i=this.element.getAttribute("disabled");if(i!==null)this.disabled=true};jSh.inherit(lcControl,lcWidget);jSh.extendObj(lces.types,{control:lcControl});lces.dynText={allowTags:true,forgiving:true};lces.dynText.tags={text:{node:function(e,t){return new lcWidget(jSh.c("span",{}))}},url:{node:function(e,t){var i=new lcWidget(jSh.c("a",{properties:{href:e}}));i.addStateListener("href",function(e){this.component.element.href=e.substr(0,4).toLowerCase()==="url:"?e.substr(4):e});return i},update:function(e){this.component.href=e}},button:{node:function(e,t){return new lcWidget(jSh.c("button",{}))},update:function(){}},color:{node:function(e,t){return new lcWidget(jSh.c("span",{attributes:{
style:"color: "+e+";"}}))},update:function(e){if(e!=="lces-color"){this.component.style={color:e};this.component.classList.remove("lces-user-text-color")}else{this.component.setAttr("style","");this.component.classList.add("lces-user-text-color")}}},b:{node:function(e,t){return new lcWidget(jSh.c("span",{attributes:{style:"font-weight: bold;"}}))},update:function(){}},i:{node:function(e,t){return new lcWidget(jSh.c("span",{attributes:{style:"font-style: italic;"}}))},update:function(){}},u:{node:function(e,t){return new lcWidget(jSh.c("span",{attributes:{style:"text-decoration: underline;"}}))},update:function(){}},center:{node:function(e,t){return new lcWidget(jSh.c("span",{attributes:{style:"display: block;text-align: center;"}}))},update:function(){}}};lces.dynText.onParamChange=function(e,t){var i="";t.forEach(function(t){if(t.type==="text"){i+=t.content}else{var n=e[t.name];if(t.handler&&e.dynText.handlers[t.handler]&&jSh.type(e.dynText.handlers[t.handler])==="function")n=e.dynText.handlers[t.handler](n);i+=n}});return i};lces.dynText.onContentChange=function(e,t){var i=e[t.mainName];if(t.handler&&e.dynText.handlers[t.handler]&&jSh.type(e.dynText.handlers[t.handler])==="function")i=e.dynText.handlers[t.handler](i);return i};lces.dynText.onDynamicChange=function(e,t){if(jSh.type(t.callback)!=="function")return false;var i="";var n=t.parent.children.length===1,s;t.parent.children.forEach(function(t){var r=t.children[0];if(r.type==="text"){i+=r.content}else if(!r.context){i+=""}else{var o=r.context;var a=o[r.name];a=a===undf?"":a;if(r.handler&&jSh.type(e.dynText.handlers[r.handler])==="function")a=e.dynText.handlers[r.handler](a);i+=a;if(n)s=a}});t.callback(n?s:i)};lces.dynText.lexerTypes={text:function(e){return/[a-zA-Z\d_]/.test(e)},number:function(e){return/[\d]/.test(e)},space:function(e){return/[\t ]/.test(e)},invalidPropChar:function(e){return!(this.text(e)||this.number(e)||e==="#"||e===".")}};lces.dynText.pushToken=function(){this.tokens.push({type:this.tokenType,content:this.tempToken})};lces.dynText.lexer=function(e,t,i,n){if(!e){if(this.tempToken)this.pushToken();return false}if(this.tempToken!==null){if(this.tokenType==="property"){if(e==="}"){if(this.tempToken)this.pushToken();this.tokenType="text";this.tempToken=null;return true}else if(n.invalidPropChar(e)){if(!this.forgiving){var s=t>10?t-5:0;var r=t+5;var o=t-s;var i=i.substr(s,r).replace("\n"," ");this.tokens='Invalid property character "'+e+'" at character index '+t+" \n\n";this.tokens+='"'+i+'" \n';this.tokens+=" "+new Array(o<0?0:o).join(" ")+" ^";return false}else{this.tokenType="text";return true}}else{this.tempToken+=e;return true}}else{if(e==="\\"){this.charIndex+=1;this.tempToken+=i[t+1];return true}else if(e==="{"||(e==="["||e==="]")&&this.allowTags){if(this.tempToken)this.pushToken();this.tempToken=null;this.charIndex-=1;return true}else{this.tempToken+=e;return true}}}else{if(e==="{"){this.tokenType="property";this.tempToken="";return true}else if(e==="["||e==="]"){this.tokenType=e==="["?"open":"close";this.tempToken=null;if(this.tokenType==="open"&&i[t+1]==="/"){this.charIndex+=1;this.tokenType="closed"}this.pushToken();return true}else{this.tokenType="text";this.tempToken=e;return true}}};lces.dynText.processTokens=function(e,t,i){if(!e){if(this.tempEntity!==this.entities){if(!this.forgiving){this.entities="Error: Unexpected end of input";return false}else{this.tempEntity=this.entities}}return false}if(this.entityContext==="tag"){if(e.type==="open"){if(!this.forgiving){this.entities='Syntax Error: Unexpected token type "open"';return false}else{this.tempEntity.params.push({type:this.tokenType,content:this.tempToken});return true}}else if(e.type==="text"){this.tempEntity.params.push(e);return true}else if(e.type==="property"){var n=e.content.split("#");if(n.length!==2){this.entities='Syntax Error: Invalid property "'+n[0]+'"';return false}this.tempEntity.params.push({type:"property",name:n[1],handler:n[0]});this.tempEntity.noParamRef=false;return true}else if(e.type==="close"){if(this.tempEntity.params.length===0){this.entities="Syntax Error: Empty opening tag";return false}this.entityContext="content";return true}}else{if(e.type==="closed"){if(!i[t+1]||!i[t+2]||i[t+1].type!=="text"||i[t+2].type!=="close"){this.entities="Syntax Error: Invalid closing tag";return false}if(this.tempEntity===this.entities&&!this.forgiving){this.entities="Syntax Error: Misplaced closing tag";return false}this.tempEntity.type=i[t+1].content;this.tokenIndex+=2;this.tempEntity=this.tempEntity.parent;return true}else if(e.type==="open"){var s={type:"text",params:[],children:[],noParamRef:true,noChildRef:true,parent:this.tempEntity};this.tempEntity.children.push(s);this.tempEntity=s;this.entityContext="tag";return true}else if(e.type==="text"){var s={type:"text",params:[],children:[e],noParamRef:true,noChildRef:true,parent:this.tempEntity};this.tempEntity.children.push(s);return true}else if(e.type==="property"){var n=e.content.split("#");if(n.length!==2){this.entities='Syntax Error: Invalid property "'+n[0]+'"';return false}var s={type:"text",params:[],children:[{type:"property",name:n[1],handler:n[0]}],noParamRef:true,noChildRef:false,parent:this.tempEntity};this.tempEntity.children.push(s);this.tempEntity.noChildRef=false;var r=this.tempEntity.parent;while(r&&r.parent){r.parent.noChildRef=false;r=r.parent}return true}}};lces.dynText.formatSyntax=function(){var e={type:"main",params:[],children:[],noParamRef:true,noChildRef:true,parent:null};this.entities=e;this.tempEntity=e;while(this.processTokens(this.tokens[this.tokenIndex],this.tokenIndex,this.tokens)){this.tokenIndex+=1}return this.entities};lces.dynText.getContext=function(e){var t=e.split(".");var i=this.context;t.pop();if(t.length===0)return i;for(var n=0;n<t.length;n++){var s=i[t[n]];if(!s||!(s instanceof Object)){i[t[n]]=new lcComponent;if(s&&jSh.type(s)==="object")jSh.extendObj(i[t[n]],s,["LCESName"])}i=i[t[n]]}return i};lces.dynText.createRenderedEntities=function n(e,t){var i=this.component;var s=this.context;var r=e.parent;if(e.type==="text"){if(e.noChildRef){if(this.allowTags){e.element=jSh.d(undf,ih(e.children[0].content)).firstChild;e.parent.element.appendChild(e.element)}}else{var o=e.children[0];var a=o.name.split(".").pop();o.mainName=a;if(this.allowTags){e.element=jSh.c("span");o.element=e.element;e.element.className=o.name.replace(/\./g,"-");e.parent.element.appendChild(e.element)}var l=this.getContext(o.name);var c=false,d;if(l[a]||(l[a]===false||l[a]===null||l[a]===0||l[a]==="")){c=true;d=l[a]}if(!l.states[a])l.setState(a);if(!l.states[a].dynTextContent){l.addStateListener(a,function(e){if(!l.states[a].contentProps)return;l.states[a].contentProps.forEach(function(e){e.element.innerHTML=lces.dynText.onContentChange(l,e)});i.triggerEvent("dynpropchange",{property:this.name})});l.addStateListener(a,function(e){if(!l.states[a].dynamicProps||jSh.type(t)!=="function")return;l.states[a].dynamicProps.forEach(function(e){lces.dynText.onDynamicChange(s,e)});i.triggerEvent("dynpropchange",{property:this.name})})}l.states[a].dynTextContent=true;if(this.allowTags){if(!l.states[a].contentProps)l.states[a].contentProps=[];l.states[a].contentProps.push(o)}else{jSh.extendObj(o,{callback:t,context:l,parent:e.parent,name:a});if(!l.states[a].dynamicProps)l.states[a].dynamicProps=[];l.states[a].dynamicProps.push(o)}l.setState(a,d,true)}}else if(e.type!=="text"){e.element=lces.dynText.tags[e.type].node().element;e.element.update=lces.dynText.tags[e.type].update;e.parent.element.appendChild(e.element);if(e.params.length){if(e.noParamRef){e.element.update(e.params[0].content)}else{e.params.forEach(function(e){if(e.name){if(!s.states[e.name])s.setState(e.name);if(!s.states[e.name].dynTextParam)s.addStateListener(e.name,function(e){s.dynText.paramProps.forEach(function(e){e.element.update(lces.dynText.onParamChange(s,e))})});s.states[e.name].dynTextParam=true}});e.params.element=e.element;this.paramProps.push(e.params)}}if(e.children.length){var h=n.bind(this);e.children.forEach(function(e){h(e)})}}return e.element};lces.dynText.renderEntities=function(e){var t=document.createDocumentFragment();var i=this;var n=this;this.entities.element=t;this.entities.children.forEach(function(t,n,s){i.createRenderedEntities(t,e)});return t};lces.dynText.compile=function(e,t){if(!e||typeof e!=="string")return false;var i=this;this.tokens=[];this.tempToken=null;this.tokenType="text";this.charIndex=0;this.tokenIndex=0;this.tempEntity=null;this.handlers=jSh.extendObj({},this.handlers);this.contentProps=[];this.paramProps=[];while(this.lexer(e[this.charIndex],this.charIndex,e,this.lexerTypes)){this.charIndex+=1}if(jSh.type(this.tokens)==="string")throw Error(this.tokens);var n=this.formatSyntax();if(jSh.type(n)==="string")throw Error(n);var s=this.renderEntities(t);if(n.noChildRef){if(this.element&&this.allowTags){if(this.element.childNodes[0])this.element.removeChild(jSh.toArr(this.element.childNodes));this.element.appendChild(s)}return false}if(this.element){var r=this.element;if(r.childNodes[0])r.removeChild(jSh.toArr(r.childNodes));r.appendChild(s)}return true};lces.dynText.handlers={trim:function(e){return(e+"").trim()}};lces.dynText.dynSanitize=function(e){return e.replace(/\{|\[/g,"\\$1")};window.lcDynamicText=function(e){if(this.dynText&&!e)return;var t=this;this.dynText={charIndex:0,tokenType:"text",tempToken:null,tokens:[],tokenIndex:0,tempEntity:null,entityContext:"content",entities:{},states:{},handlers:{},contentProps:[],paramProps:[],context:this,component:this,element:this.element};this.addEvent("dynpropchange");jSh.extendObj(this.dynText,lces.dynText);if(this.dynTextTrigger){var i=this.dynTextTrigger;this.addStateListener(i,function(e){t.dynText.compile(e)})}};lces.ui.setState("scrollY",scrollY);lces.ui.addStateListener("scrollY",function(e){if(jSh.type(e)==="object"&&e.element||e instanceof Node){var t=e.element||e;var i=t.getBoundingClientRect();var n=t.offsetHeight;e=i.top+scrollY-innerHeight/2+n/2}if(isNaN(e))return false;var s=e-scrollY;var r=scrollY;clearQS(lces.ui._scrollProcess);function o(e){scrollTo(scrollX,r+e*s)}function a(){lces.ui.scrollY=undefined}lces.ui._scrollProcess=new qsFadein(o,0,1,.35,a,undf,true,.002)});lces.ui.states["scrollY"].get=function(){return scrollY};lces.ui.addEvent("resize");var e=null;var t=0;var i=0;lces.ui.assertResized=function(n,s){if(e){clearTimeout(e)}else if(!s){t=innerWidth;i=innerHeight}e=setTimeout(function(){lces.ui.triggerEvent("resize",{oldWidth:t,oldHeight:i,width:innerWidth,height:innerHeight});e=null},s?0:500)};window.addEventListener("resize",lces.ui.assertResized);lces.ui.setState("mobile",null);lces.ui.mobileWidth=560;lces.ui.assertMobile=function(){if(innerWidth<=lces.ui.mobileWidth)lces.ui.mobile=true;else lces.ui.mobile=false};window.addEventListener("resize",lces.ui.assertMobile);lces.rc[11]=function(){lces.url=new lcComponent;lces.url.triggers={};lces.url.setState("triggerCount",0);lces.url.setState("acceptChange",false);lces.url.states["triggerCount"].get=function(){return Object.getOwnPropertyNames(lces.url.triggers).length};lces.url._onURLChange=function(){var e=lces.url.process();if(!e){if(jSh.type(lces.url.triggers._default)==="function")lces.url.triggers._default();return false}e.func.apply(this,e.args)};lces.url.addStateListener("acceptChange",function(e){if(e){window.addEventListener("popstate",lces.url._onURLChange)}else{window.removeEventListener("popstate",lces.url._onURLChange)}});lces.url.process=function(){var e=location.pathname.substr(1).split("/");var t=null;e.every(function(e,i){if(lces.url.triggers[e]){t=i;return false}return true});if(t===null)return false;var i=null;var n=null;var s=null;function r(e){return typeof e==="function"}e.every(function(o,a){if(a>=t){var l=s?s[e[a]]:lces.url.triggers[e[a]];if(!l){return false}if(r(l)){i=l;n=e.slice(a+1);return false}s=l}return true});if(!i)return false;return{func:i,args:n}};lces.url.set=function(e){history.pushState(null,null,e)}}};lces.rc[5]=function(){lces.template=function i(e){if(!e)throw Error("lces.template() requires one options object as the first argument");if(!e.render)throw Error("lces.template(options) options object must contain a MockupElement as a render property");if(!(e.render instanceof jSh.MockupElement))throw Error("Element provided does not implement the jSh.MockupElement interface");return i.build(e)};lces.template.addInit=function(e){if(typeof e==="function")this.__initFuncs.push(e)};lces.template.removeInit=function(e){var t=this.__initFuncs.indexOf(e);if(t!==-1)this.__initFuncs.splice(t,1)};lces.template.build=function n(e){var t=function i(e,t){if(this instanceof lces.template){var n;if(!e||!(e instanceof lcComponent)){n=i.context&&i instanceof lcComponent?i.context:new lcWidget;if(jSh.type(e)==="object"){if(jSh.type(i.context)==="object"&&n!==i)jSh.extendObj(e,i.context);jSh.extendObj(n,e,"LCESName")}e=n}else{if(jSh.type(i.context)==="string"&&jSh.type(e[i.context])==="object"){if(!(e[i.context]instanceof lcComponent)){var s=new lcWidget;jSh.extendObj(s,e[i.context],"LCESName");e=s}else{e=e[i.context]}}}lcDynamicText.call(e);e.context=e;var r=i.render.conceive(true,e);i.__initFuncs.forEach(function(t){t(r,e||i.context)});if(n){r.component=n;n.element=r}r.mainComponent=n||e;if(t&&i.append)i.append(t,r);return r}else{var o={render:i.render.cloneNode(true),__initFuncs:i.__initFuncs.slice(),context:(e?e.context:null)||i.context};if(e&&e.append&&typeof e.append==="function"&&e.length>=2)o.append=e.append;if(e&&e.init){var a=jSh.type(e.init);if(a==="array")o.__initFuncs=o.__initFuncs.concat(e.init);else if(a==="function")o.__initFuncs.push(e.init)}return lces.template.build(o)}};t.render=e.render;Object.defineProperty(t,"__initFuncs",{value:e.__initFuncs?e.__initFuncs.slice():[],enumerable:false,configurable:false,writable:false});t.addInit=lces.template.addInit;t.removeInit=lces.template.removeInit;t.addInit(e.init);t.context=e.context;jSh.inherit(t,lces.template);return t};lces.template.isChild=function(e,t){if(t===window){var i=function n(){if(this!==window){var e=new n.templChildFunc;e.Component=e.component;if(n.templChildOptions)jSh.extendObj(e,n.templChildOptions);return e.element}else{return n}};i.templChildFunc=e.callee;i.templChildOptions=e[0];return i}else{return false}};jSh.MockupElementMethods={construct:function(e,t,i){var n=this;var s=t?jSh.MockupElement(this.tagName):jSh.e(this.tagName.toLowerCase());var r=s.nsElm;if(i)i.dynText.allowTags=false;var o=/^ns:[^:]+:[^]*$/i;Object.getOwnPropertyNames(this.attributes).forEach(function(e){var t=o.test(e);var r,a,l=e;if(t){r=e.replace(/^ns:[^:]+:([^]*)$/i,"$1");a=e.replace(/^ns:([^:]+):[^]*$/i,"$1");e=a}if(i){var c=i.dynText.compile(n.attributes[l],function(i){if(!t)s.setAttribute(e,i);else s.setAttributeNS(r?r:null,a,i)});if(!c){if(!t)s.setAttribute(e,n.attributes[e]);else s.setAttributeNS(r?r:null,a,n.attributes[l])}}else{if(!t)s.setAttribute(e,n.attributes[e]);else s.setAttributeNS(r?r:null,a,n.attributes[l])}});Object.getOwnPropertyNames(this.__events).forEach(function(e){var t,i;var r=n.__events[e];for(var o=0;o<r.length;o+=2){t=r[o];i=r[o+1];s.addEventListener(e,t,i)}});if(this.getAttribute("style"))s.setAttribute("style",this.getAttribute("style"));if(i){i.dynText.element=s;jSh.spliceItem(jSh.MockupElementOnlyProps,"innerHTML","_innerHTML","textContent","_textContent");if(this._textContent){var a=jSh.c("span",undf,this._textContent);var l=i.dynText.compile(this._textContent,function(e){a.textContent=e});s.appendChild(a);jSh.pushItems(jSh.MockupElementOnlyProps,"textContent","_textContent")}else if(this._innerHTML){i.dynText.allowTags=true;var c=i.dynText.compile(this._innerHTML);jSh.pushItems(jSh.MockupElementOnlyProps,"innerHTML","_innerHTML")}i.dynText.allowTags=false;i.dynText.element=null}Object.getOwnPropertyNames(this).filter(function(e){return jSh.MockupElementOnlyProps.indexOf(e)===-1}).forEach(function(e){if(i&&jSh.type(n[e])==="string"){var t=i.dynText.compile(n[e]+"",function(t){s[e]=t});if(!t)s[e]=n[e]}else if(n[e])s[e]=n[e]});if(this.className){if(!r)s.className=this.className;else s.setAttribute("class",this.className)}if(e){var d=t?"cloneNode":"conceive";this.childNodes.forEach(function(e){s.appendChild(e[d](true,i))})}return jSh(s)},conceive:function(e,t){return this.construct(e,false,t)},cloneNode:function(e){return this.construct(e,true)},__childCheck:function(e,t,i){if(e&&jSh.hasMultipleArgs(e,this))return false;if(!(t instanceof jSh.MockupElement)){if(jSh.type(t)==="function"&&t.prototype)if(t.prototype instanceof lces.template)return true;else;else throw TypeError(i||"Element provided doesn't implement the jSh.MockupElement interface")}return true},__childDetermineType:function(e,t){if(typeof e==="function"){if(t||!e.lcesTemplateMockupWrapper)return jSh.cm("lces-template-constructor",e);else return e.lcesTemplateMockupWrapper}return e},appendChild:function(e){if(!this.__childCheck(arguments,e))return undf;e=this.__childDetermineType(e);this.childNodes.push(e);e.__privParentNode=this},removeChild:function(e){if(!this.__childCheck(arguments,e))return false;e=this.__childDetermineType(e);var t=this.childNodes.indexOf(e);if(t!==-1){this.childNodes.splice(t,1);e.__privParentNode=null}},insertBefore:function(e,t){if(!this.__childCheck(undf,e,"Element provided doesn't implement the jSh.MockupElement interface"))return false;e=this.__childDetermineType(e);t=this.__childDetermineType(t);var i=this.childNodes.indexOf(t);if(i!==-1){this.childNodes.splice(i,0,e);e.__privParentNode=this}},traverse:function(e,t){var i=this;e.childNodes.forEach(function(e){t(e);if(e.childNodes[0])i.traverse(e,t)})},getElementsByTagName:function(e){var t=[];this.traverse(this,function(i){if(i.tagName.toLowerCase()===e.toLowerCase())t.push(i)});return t},getElementsByClassName:function(e){var t=[];this.traverse(this,function(i){if(i.classList.contains(e))t.push(i)});return t},getElementById:function(e){var t=null;this.traverse(this,function(i){if(i.id===e)t=i});return t},addEventListener:function(e,t,i){var n=this.__events[e];if(!n){n=[];this.__events[e]=n}n.push(t,i)},removeEventListener:function(t,i){var n=this.__events[event];if(!n)return null;var s=n.indexOf(e);if(s!==-1)n.splice(s,1)},__setStyleFromAttr:function(e){var t=this;this.style={};var i=this.style;var n=e.split(/\s*;\s*/g);n.forEach(function(e){if(!e.trim(""))return;var t=e.split(/\s*:\s*/);var n=t[0].split("-");n=n.map(function(e,t){if(t!==0)var i=e[0].toUpperCase();else var i=e[0].toLowerCase();return i+e.substr(1)}).join("");i[n]=t[1]})},__JSProp2CSS:function(e){var t=/[A-Z]/;e=e.split("");return e.map(function(e){return t.test(e)?"-"+e.toLowerCase():e}).join("")},__getStyleFromAttr:function(){var e=this;var t=this.style;return Object.getOwnPropertyNames(t).map(function(i){return e.__JSProp2CSS(i)+": "+t[i]+";"}).join("")},setAttribute:function(e,t){e=e+"";t=t+"";this.attributes[e]=t;if(e==="style")this.__setStyleFromAttr(t)},getAttribute:function(e){return e!=="style"?this.attributes[e]:this.__getStyleFromAttr()},removeAttribute:function(e){e=e+"";this.attributes[e]=undf},setAttributeNS:function(e,t,i){this.setAttribute("ns:"+t+":"+(e?e:""),i)}};jSh.MockupElementClassList={manipulateClass:function(e,t){if(!t&&e===undf){this.classes=[]}else if(jSh.type(e)&&e.trim()){var i=e.split(/\s+/);var n=this.classes;i.forEach(function(e){var i=n.indexOf(e);if(t&&i===-1||!t&&i!==-1){if(t)n.push(e);else n.splice(i,1)}})}},add:function(e){this.manipulateClass(e,true)},remove:function(e){this.manipulateClass(e,false)},contains:function(e){return this.classes.indexOf(e)!==-1},toggle:function(e){if(this.contains(e))this.remove(e);else this.add(e)}};jSh.MockupElementOnlyProps=[];jSh.MockupElementOnlyProps=jSh.MockupElementOnlyProps.concat(Object.getOwnPropertyNames(jSh.MockupElementMethods));jSh.MockupElementOnlyProps=jSh.MockupElementOnlyProps.concat(["classList","style","childNodes","tagName","__events","attributes","jSh","parentNode","previousSibling","nextSibling","getChild","on","__privParentNode","__apch","__rmch","nodeType","className"]);jSh.MockupElementsBarren=["img","input","link","meta"];jSh.MockupElement=function s(e){if(!(this instanceof s))return new s(e);var t=this;e=jSh.type(e)==="string"?e:"div";this.nodeType=Node.ELEMENT_NODE;Object.defineProperty(this,"tagName",{value:e.toUpperCase(),enumerable:true,configurable:false,writable:false});var i={};Object.defineProperty(this,"style",{enumerable:true,configurable:false,get:function(){return i}});Object.defineProperty(this,"__privParentNode",{value:null,enumerable:false,configurable:false,writable:true});Object.defineProperty(this,"parentNode",{enumerable:true,configurable:false,get:function(){return t.__privParentNode}});Object.defineProperty(this,"previousSibling",{enumerable:true,configurable:false,get:function(){if(!t.parentNode)return null;var e=t.parentNode.childNodes.indexOf(t);if(e===0)return null;return t.parentNode.childNodes[e-1]}});Object.defineProperty(this,"nextSibling",{enumerable:true,configurable:false,get:function(){if(!t.parentNode)return null;var e=t.parentNode.childNodes.indexOf(t);var i=t.parentNode.childNodes.length;if(e===i-1)return null;return t.parentNode.childNodes[e+1]}});Object.defineProperty(this,"childNodes",{value:[],enumerable:true,configurable:false,writable:false});Object.defineProperty(this,"children",{enumerable:true,configurable:false,get:function(){return t.childNodes.map(function(e){if(e.tagName.toLowerCase()==="lces-template-constructor")return e.__lcesTemplateConstructor;return e})}});Object.defineProperty(this,"__events",{value:{},enumerable:true,configurable:false,writable:false});Object.defineProperty(this,"attributes",{value:{},enumerable:true,configurable:false,writable:false});jSh.extendObj(this,jSh.MockupElementMethods);Object.defineProperty(this,"classList",{value:jSh.extendObj({classes:[],element:this},jSh.MockupElementClassList),enumerable:true,configurable:false,writable:false});Object.defineProperty(this.classList,"length",{enumerable:true,configurable:false,get:function(){return t.classList.length}});Object.defineProperty(this,"className",{enumerable:true,configurable:false,get:function(){return t.classList.classes.join(" ")},set:function(e){if(jSh.type(e)&&e.trim()){t.classList.remove();t.classList.add(e)}else{t.classList.remove()}}})};jSh.MockupElement.prototype.constructor=jSh.MockupElement;jSh.__MockupTextConceive=function(e,t){if(t){t.dynText.allowTags=true;t.dynText.element=document.createDocumentFragment();var i=t.dynText.compile(e);if(i)return t.dynText.element;else return jSh.t(this.nodeValue)}else{return jSh.t(this.nodeValue)}};jSh.MockupText=function r(e){if(!(this instanceof jSh.MockupText))return new jSh.MockupText(e);this.nodeValue=e;this.nodeType=Node.TEXT_NODE;this.conceive=jSh.__MockupTextConceive};jSh.inherit(jSh.MockupText,jSh.MockupElement);jSh.dm=function o(e,t,i,n,s,r){return jSh.d.call({lcesElement:jSh.MockupElement("div")},e,t,i,n,s,r)};jSh.cm=function a(e,t,i,n,s,r,o){if(e!=="lces-template-constructor")return jSh.d.call({lcesElement:jSh.MockupElement(e)},t,i,n,s,r,o);else return jSh.d.call({lcesElement:jSh.MockupElement(e)},{prop:{__lcesTemplateConstructor:t,conceive:function(e,t){return new this.__lcesTemplateConstructor(t)}}})};jSh.svgm=function(e,t,i,n){return jSh.cm("ns:svg:http://www.w3.org/2000/svg",e,undf,n,{version:"1.1",width:t,height:i})};jSh.pathm=function(e,t,i){return jSh.cm("ns:path:http://www.w3.org/2000/svg",e,undf,undf,{"ns:d:":t,"ns:style:":i||""})};jSh.tm=function l(e){return jSh.MockupText(e)};lces.template.__placeHolderReplace=function(e){var t=this;var i=this.parent;var e=this._determineType(e);if(!i)return null;i.insertBefore(e,this.element);if(arguments.length>1){var n=jSh.toArr(arguments).slice(1);n.forEach(function(e){i.insertBefore(e,t.element)})}i.removeChild(this.element);this.substituting=null};lces.template.__placeHolderSubstitute=function(e){var e=this._determineType(e);if(!e.parentNode)return null;e.parentNode.insertBefore(this.element,e);e.parentNode.removeChild(e);this.substituting=e};function t(e){var t=this;lcWidget.call(this,e);this.type="LCES Placeholder Widget";this.replace=lces.template.__placeHolderReplace;this.substitute=lces.template.__placeHolderSubstitute;this.element.replace=lces.template.__placeHolderReplace.bind(this);this.element.substitute=lces.template.__placeHolderSubstitute.bind(this);this.addStateListener("phName",function(e){t.element.setAttribute("ph-name",e)})}jSh.inherit(t,lcWidget);jSh.ph=function(e){var i=new t(jSh.c("lces-placeholder"));i.phName=e;return i.element};jSh.phm=function(e){var i=new t(jSh.cm("lces-placeholder"));i.phName=e;return i.element};lces.template.initLoadPH=function(){var e=jSh("lces-placeholder");e.forEach(function(e){var i=e.getAttribute("ph-name");var n=new t(e);if(i){e.phName=i;n.phName=i}})};lces.template.initLoadTemplates=function(){var e=jSh("lces-template");e.forEach(function(e){var t=lces.template.list[e.getAttribute("template")];var i=e.getAttribute("context");if(t&&e.getAttribute("context")){var n=(i?lces(i):null)||new lcComponent;if(i)n.LCESName=i;var s=e.id;var r=e.className.split(" ");var o=new t(n,jSh.toArr(e.childNodes));r.forEach(function(e){if(e)o.classList.add(e)});if(s)o.id=s;e.id="";e.parentNode.insertBefore(o,e);e.parentNode.removeChild(e)}})};lces.addInit(lces.template.initLoadTemplates);lces.addInit(lces.template.initLoadPH);lces.template.list={}};
